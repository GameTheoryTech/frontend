{"version":3,"sources":["components/ModalActions/ModalActions.tsx","components/TokenInput/TokenInput.tsx","components/CardIcon/CardIcon.tsx","hooks/useAllowance.ts","components/UnlockWallet/UnlockWallet.tsx","components/Input/Input.tsx","hooks/useApprove.ts","components/Spacer/Spacer.tsx","components/Value/Value.tsx","hooks/useTombStats.ts","hooks/usetShareStats.ts","hooks/useLpStats.ts","hooks/useZap.ts","hooks/useStakedTokenPriceInDollars.ts","components/Icon/Icon.tsx","components/icons/AddIcon.tsx","components/icons/RemoveIcon.tsx","hooks/useApproveZapper.ts","views/Bank/components/ZapModal.tsx","components/PageHeader/PageHeader.tsx","components/IconButton/IconButton.tsx","hooks/useTotalTreasuryBalance.js","hooks/useBanks.ts","hooks/useEarnings.ts","hooks/useHarvest.ts","views/Bank/components/Harvest.tsx","hooks/useStake.ts","hooks/useStakedBalance.ts","hooks/useWithdraw.ts","views/Bank/components/DepositModal.tsx","views/Bank/components/WithdrawModal.tsx","views/Bank/components/Stake.tsx","hooks/useBank.ts","hooks/useStatsForPool.ts","hooks/useRedeem.ts","views/Bank/Bank.tsx","views/Treasury/Cemetery.js"],"names":["StyledModalActions","styled","div","props","theme","color","grey","spacing","StyledModalAction","StyledSpacer","ModalActions","children","l","React","Children","toArray","length","map","child","i","StyledTokenInput","StyledTokenAdornmentWrapper","StyledMaxText","TokenInput","max","symbol","onChange","onSelectMax","value","toLocaleString","Input","endAdornment","Button","size","variant","onClick","placeholder","StyledCardIcon","CardIcon","useAllowance","token","spender","pendingApproval","useState","allowance","setAllowance","account","useWallet","fastRefresh","useRefresh","fetchAllowance","useCallback","a","useEffect","catch","err","console","error","stack","UnlockWallet","Box","style","position","top","left","transform","AccountButton","StyledInputWrapper","borderRadius","StyledInput","input","startAdornment","ApprovalState","APPROVE_AMOUNT","ethers","constants","MaxUint256","APPROVE_BASE_AMOUNT","BigNumber","from","useApprove","useHasPendingApproval","address","currentAllowance","approvalState","useMemo","lt","PENDING","NOT_APPROVED","APPROVED","UNKNOWN","addTransaction","useTransactionAdder","approve","response","summary","approval","tokenAddress","Spacer","s","useContext","ThemeContext","StyledValue","Value","useTombStats","stat","setStat","tombFinance","useTombFinance","getTombStat","fetchTombPrice","useShareStats","slowRefresh","getShareStat","fetchSharePrice","useLpStats","lpTicker","getLPStat","fetchLpPrice","useZap","bank","handleTransactionReceipt","useHandleTransactionReceipt","onZap","zappingToken","tokenName","amount","zapIn","depositTokenName","useStakedTokenPriceInDollars","stakedTokenName","stakedToken","stakedTokenPriceInDollars","setStakedTokenPriceInDollars","isUnlocked","fetchBalance","getDepositTokenPriceInDollars","balance","refreshStakedTokenPriceInDollars","setInterval","config","refreshInterval","clearInterval","StyledIcon","Icon","AddIcon","themeColor","height","viewBox","width","d","fill","RemoveIcon","useApproveZapper","DAI_TICKER","FTM","TOMB_TICKER","TOMB","TSHARE_TICKER","TSHARE","ZAPPER_ROUTER_ADDR","StyledActionSpacer","StyledDescriptionText","StyledMenuItem","withStyles","root","backgroundColor","selected","MenuItem","ZapModal","onConfirm","onDismiss","decimals","useTokenBalance","ftmBalance","getDisplayBalance","tombBalance","tshareBalance","val","setVal","setZappingToken","zappingTokenBalance","setZappingTokenBalance","token0","token1","estimate","setEstimate","approveZapperStatus","approveZapper","tombFtmLpStats","tShareFtmLpStats","tombLPStats","tshareLPStats","ftmAmountPerLP","startsWith","ftmAmount","handleChange","e","currentTarget","n","isNaN","parseFloat","isFinite","estimateZapIn","String","estimateZap","toString","handleSelectMax","Modal","ModalTitle","text","InputLabel","id","Select","event","target","labelId","Label","Number","Alert","severity","StyledPageHeader","StyledTitle","h1","StyledSubtitle","h3","PageHeader","icon","subtitle","title","StyledButton","button","disabled","primary","main","undefined","StyledLink","Link","IconButton","to","web3","Web3","ERC20ABI","treasuryAddress","useTotalTreasuryBalance","Theory","eth","Contract","DAI","setBalance","balance_2shares_dai","setBalance_2shares_dai","balance_game_dai","setBalance_game_dai","balancetheory_dai","setBalancetheory_dai","balance_game","setBalance_game","balancetheory","setBalancetheory","balance_2shares","setBalance_2shares","getBalance","interval","axios","data","utils","methods","balanceOf","call","theoryBalance","fromWei","valueTheory","data2sharesAndGame","log","usd_value","getLPPrice","LP_2shares_dai","LP_game_dai","LPtheory_dai","getGameBalance","getTheoryBalance","get2sharesBalance","tokenGame","price","usdValue","tokenTheory","token2shares","LPAddress","LPtoken","daiValue","getTokenPrice","tokenValue","totalSupply","OneTokenValue","total","useBanks","BanksContext","banks","useEarnings","poolName","earnTokenName","poolId","earnedFromBank","myAccount","refreshBalance","useHarvest","onReward","harvest","contract","StyledCardHeader","StyledCardActions","StyledCardContentInner","Harvest","rewardsLocked","earnings","tombStats","tShareStats","tokenStats","tokenPriceInDollars","priceInDollars","toFixed","earnedInDollars","Card","boxShadow","CardContent","TokenSymbol","earnToken","eq","useStake","onStake","amountBn","parseUnits","depositToken","decimal","stake","useStakedBalance","stakedBalanceOnBank","useWithdraw","onWithdraw","unstake","DepositModal","fullBalance","getFullDisplayBalance","WithdrawModal","Stake","approveStatus","tokenBalance","stakedBalance","useModal","onDismissDeposit","onPresentDeposit","onDissmissZap","onPresentZap","onDismissWithdraw","onPresentWithdraw","closedForStaking","marginTop","useBank","contractName","find","page","useStatsForPool","poolAPRs","setPoolAPRs","fetchAPRsForPool","getPoolAPRs","useRedeem","onRedeem","exit","useStyles","makeStyles","gridItem","breakpoints","up","LPTokenHelpText","pairName","uniswapUrl","tombAddr","tshareAddr","includes","href","BankNotFound","Center","StyledBank","StyledCardsWrapper","StyledCardWrapper","Bank","window","scrollTo","classes","bankId","useParams","statsOnPool","name","marginBottom","Grid","container","justifyContent","rowSpacing","columnSpacing","item","xs","md","lg","className","textAlign","Typography","yearlyAPR","locked","dailyAPR","TVL","fee","mt","endsWith","BackgroundImage","createGlobalStyle","Cemetery","path","useRouteMatch","filter","finished","Page","exact","Container","maxWidth","align","gutterBottom","fontSize","end","separator","prefix"],"mappings":"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","file":"static/js/13.a1f407a0.chunk.js","sourcesContent":["import React from 'react';\r\nimport styled from 'styled-components';\r\n\r\nconst ModalActions: React.FC = ({ children }) => {\r\n  const l = React.Children.toArray(children).length;\r\n  return (\r\n    <StyledModalActions>\r\n      {React.Children.map(children, (child, i) => (\r\n        <>\r\n          <StyledModalAction>{child}</StyledModalAction>\r\n          {i < l - 1 && <StyledSpacer />}\r\n        </>\r\n      ))}\r\n    </StyledModalActions>\r\n  );\r\n};\r\n\r\nconst StyledModalActions = styled.div`\r\n  align-items: center;\r\n  background-color: ${(props) => props.theme.color.grey[100]}00;\r\n  display: flex;\r\n  height: 96px;\r\n  margin: ${(props) => props.theme.spacing[4]}px ${(props) => -props.theme.spacing[4]}px\r\n    ${(props) => -props.theme.spacing[4]}px;\r\n  padding: 0 ${(props) => props.theme.spacing[4]}px;\r\n`;\r\n\r\nconst StyledModalAction = styled.div`\r\n  flex: 1;\r\n`;\r\n\r\nconst StyledSpacer = styled.div`\r\n  width: ${(props) => props.theme.spacing[4]}px;\r\n`;\r\n\r\nexport default ModalActions;\r\n","import React from 'react';\r\nimport styled from 'styled-components';\r\n\r\nimport { Button } from '@mui/material';\r\nimport Input, { InputProps } from '../Input';\r\n\r\ninterface TokenInputProps extends InputProps {\r\n  max: number | string;\r\n  symbol: string;\r\n  onSelectMax?: () => void;\r\n}\r\n\r\nconst TokenInput: React.FC<TokenInputProps> = ({ max, symbol, onChange, onSelectMax, value }) => {\r\n  return (\r\n    <StyledTokenInput>\r\n      <StyledMaxText>\r\n        {max.toLocaleString()} {symbol} Available\r\n      </StyledMaxText>\r\n      <Input\r\n        endAdornment={\r\n          <StyledTokenAdornmentWrapper>\r\n            {/* <StyledTokenSymbol>{symbol}</StyledTokenSymbol> */}\r\n            <StyledSpacer />\r\n            <div>\r\n              <Button size=\"small\" color=\"primary\" variant=\"contained\" onClick={onSelectMax}>\r\n                Max\r\n              </Button>\r\n            </div>\r\n          </StyledTokenAdornmentWrapper>\r\n        }\r\n        onChange={onChange}\r\n        placeholder=\"0\"\r\n        value={value}\r\n      />\r\n    </StyledTokenInput>\r\n  );\r\n};\r\n\r\n/*\r\n            <div>\r\n              <Button size=\"sm\" text=\"Max\" />\r\n            </div>\r\n*/\r\n\r\nconst StyledTokenInput = styled.div``;\r\n\r\nconst StyledSpacer = styled.div`\r\n  width: ${(props) => props.theme.spacing[3]}px;\r\n`;\r\n\r\nconst StyledTokenAdornmentWrapper = styled.div`\r\n  align-items: center;\r\n  display: flex;\r\n`;\r\n\r\nconst StyledMaxText = styled.div`\r\n  align-items: center;\r\n  color: ${(props) => props.theme.color.grey[400]};\r\n  display: flex;\r\n  font-size: 14px;\r\n  font-weight: 700;\r\n  height: 44px;\r\n  justify-content: flex-end;\r\n`;\r\n\r\nexport default TokenInput;\r\n","import React from 'react';\r\nimport styled from 'styled-components';\r\n\r\ninterface CardIconProps {\r\n  children?: React.ReactNode;\r\n}\r\n\r\nconst CardIcon: React.FC<CardIconProps> = ({ children }) => <StyledCardIcon>{children}</StyledCardIcon>;\r\n\r\nconst StyledCardIcon = styled.div`\r\n  background-color: none;\r\n  font-size: 36px;\r\n  height: 95px;\r\n  width: 95px;\r\n  border-radius: 40px;\r\n  align-items: center;\r\n  display: flex;\r\n  justify-content: center;\r\n  box-shadow: none !important;\r\n  margin: 0 auto ${(props) => props.theme.spacing[3]}px;\r\n`;\r\n\r\nexport default CardIcon;\r\n","import { useCallback, useEffect, useState } from 'react';\r\nimport { useWallet } from 'use-wallet';\r\nimport { BigNumber } from 'ethers';\r\nimport ERC20 from '../tomb-finance/ERC20';\r\nimport useRefresh from \"./useRefresh\";\r\n\r\nconst useAllowance = (token: ERC20, spender: string, pendingApproval?: boolean) => {\r\n  const [allowance, setAllowance] = useState<BigNumber>(null);\r\n  const { account } = useWallet();\r\n  const { fastRefresh } = useRefresh();\r\n\r\n  const fetchAllowance = useCallback(async () => {\r\n    const allowance = await token.allowance(account, spender);\r\n    setAllowance(allowance);\r\n  }, [account, spender, token]);\r\n\r\n  useEffect(() => {\r\n    if (account && spender && token) {\r\n      fetchAllowance().catch((err) => console.error(`Failed to fetch allowance: ${err.stack}`));\r\n    }\r\n  }, [account, spender, token, pendingApproval, fetchAllowance, fastRefresh]);\r\n\r\n  return allowance;\r\n};\r\n\r\nexport default useAllowance;\r\n","import React from 'react';\r\nimport { Box } from '@mui/material';\r\nimport AccountButton from '../Nav/AccountButton';\r\n\r\nconst UnlockWallet = () => {\r\n  return (\r\n    <Box style={{ position: 'absolute', top: '50%', left: '50%', transform: 'translate(-50%, -50%)' }}>\r\n      <AccountButton />\r\n      {/* <Button color=\"primary\" variant=\"contained\" onClick={() => connect('injected')}>Unlock Wallet</Button> */}\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default UnlockWallet;\r\n","import React from 'react';\r\nimport styled from 'styled-components';\r\n\r\nexport interface InputProps {\r\n  endAdornment?: React.ReactNode;\r\n  onChange: (e: React.FormEvent<HTMLInputElement>) => void;\r\n  placeholder?: string;\r\n  startAdornment?: React.ReactNode;\r\n  value: string;\r\n}\r\n\r\nconst Input: React.FC<InputProps> = ({ endAdornment, onChange, placeholder, startAdornment, value }) => {\r\n  return (\r\n    <StyledInputWrapper>\r\n      {!!startAdornment && startAdornment}\r\n      <StyledInput placeholder={placeholder} value={value} onChange={onChange} />\r\n      {!!endAdornment && endAdornment}\r\n    </StyledInputWrapper>\r\n  );\r\n};\r\n\r\nconst StyledInputWrapper = styled.div`\r\n  align-items: center;\r\n  background-color: white;\r\n  border-radius: ${(props) => props.theme.borderRadius}px;\r\n  display: flex;\r\n  padding: 0 ${(props) => props.theme.spacing[3]}px;\r\n`;\r\n\r\nconst StyledInput = styled.input`\r\n  background: none;\r\n  border: 0;\r\n  color: ${(props) => props.theme.color.grey[600]};\r\n  font-size: 18px;\r\n  flex: 1;\r\n  height: 56px;\r\n  margin: 0;\r\n  padding: 0;\r\n  outline: none;\r\n`;\r\n\r\nexport default Input;\r\n","import { BigNumber, ethers } from 'ethers';\r\nimport { useCallback, useMemo } from 'react';\r\nimport { useHasPendingApproval, useTransactionAdder } from '../state/transactions/hooks';\r\nimport useAllowance from './useAllowance';\r\nimport ERC20 from '../tomb-finance/ERC20';\r\nimport useRefresh from './useRefresh';\r\n\r\nconst APPROVE_AMOUNT = ethers.constants.MaxUint256;\r\nconst APPROVE_BASE_AMOUNT = BigNumber.from('1000000000000000000000000');\r\n\r\nexport enum ApprovalState {\r\n  UNKNOWN,\r\n  NOT_APPROVED,\r\n  PENDING,\r\n  APPROVED,\r\n}\r\n\r\n// returns a variable indicating the state of the approval and a function which approves if necessary or early returns\r\nfunction useApprove(token: ERC20, spender: string): [ApprovalState, () => Promise<void>] {\r\n  const pendingApproval = useHasPendingApproval(token.address, spender);\r\n  const currentAllowance = useAllowance(token, spender, pendingApproval);\r\n  const { fastRefresh } = useRefresh();\r\n\r\n  // check the current approval status\r\n  const approvalState: ApprovalState = useMemo(() => {\r\n    // we might not have enough data to know whether or not we need to approve\r\n    if (!currentAllowance) return ApprovalState.UNKNOWN;\r\n\r\n    // amountToApprove will be defined if currentAllowance is\r\n    return currentAllowance.lt(APPROVE_BASE_AMOUNT)\r\n      ? pendingApproval\r\n        ? ApprovalState.PENDING\r\n        : ApprovalState.NOT_APPROVED\r\n      : ApprovalState.APPROVED;\r\n  }, [currentAllowance, pendingApproval]);\r\n\r\n  const addTransaction = useTransactionAdder();\r\n\r\n  const approve = useCallback(async (): Promise<void> => {\r\n    if (approvalState !== ApprovalState.NOT_APPROVED) {\r\n      console.error('approve was called unnecessarily');\r\n      return;\r\n    }\r\n\r\n    const response = await token.approve(spender, APPROVE_AMOUNT);\r\n    addTransaction(response, {\r\n      summary: `Approve ${token.symbol}`,\r\n      approval: {\r\n        tokenAddress: token.address,\r\n        spender: spender,\r\n      },\r\n    });\r\n  }, [approvalState, fastRefresh, token, spender, addTransaction]);\r\n\r\n  return [approvalState, approve];\r\n}\r\n\r\nexport default useApprove;\r\n","import React, { useContext } from 'react';\r\nimport styled, { ThemeContext } from 'styled-components';\r\n\r\ninterface SpacerProps {\r\n  size?: 'sm' | 'md' | 'lg';\r\n}\r\n\r\nconst Spacer: React.FC<SpacerProps> = ({ size = 'md' }) => {\r\n  const { spacing } = useContext(ThemeContext);\r\n\r\n  let s: number;\r\n  switch (size) {\r\n    case 'lg':\r\n      s = spacing[6];\r\n      break;\r\n    case 'sm':\r\n      s = spacing[2];\r\n      break;\r\n    case 'md':\r\n    default:\r\n      s = spacing[4];\r\n  }\r\n\r\n  return <StyledSpacer size={s} />;\r\n};\r\n\r\ninterface StyledSpacerProps {\r\n  size: number;\r\n}\r\n\r\nconst StyledSpacer = styled.div<StyledSpacerProps>`\r\n  height: ${(props) => props.size}px;\r\n  width: ${(props) => props.size}px;\r\n`;\r\n\r\nexport default Spacer;\r\n","import React from 'react';\r\n\r\nimport styled from 'styled-components';\r\n\r\ninterface ValueProps {\r\n  value: string;\r\n}\r\n\r\nconst Value: React.FC<ValueProps> = ({ value }) => {\r\n  return <StyledValue>{value}</StyledValue>;\r\n};\r\n\r\nconst StyledValue = styled.div`\r\n  font-size: 36px;\r\n  font-weight: 700;\r\n`;\r\n\r\nexport default Value;\r\n","import { useEffect, useState } from 'react';\r\nimport useTombFinance from './useTombFinance';\r\nimport { TokenStat } from '../tomb-finance/types';\r\nimport useRefresh from './useRefresh';\r\n\r\nconst useTombStats = () => {\r\n  const [stat, setStat] = useState<TokenStat>();\r\n  const { fastRefresh } = useRefresh();\r\n  const tombFinance = useTombFinance();\r\n\r\n  useEffect(() => {\r\n    async function fetchTombPrice(){\r\n      try {\r\n        setStat(await tombFinance.getTombStat());\r\n      }\r\n      catch(err){\r\n        console.error(err)\r\n      }\r\n    }\r\n    fetchTombPrice();\r\n  }, [setStat, tombFinance, fastRefresh]);\r\n\r\n  return stat;\r\n};\r\n\r\nexport default useTombStats;\r\n","import { useEffect, useState } from 'react';\r\nimport useTombFinance from './useTombFinance';\r\nimport { TokenStat } from '../tomb-finance/types';\r\nimport useRefresh from './useRefresh';\r\n\r\nconst useShareStats = () => {\r\n  const [stat, setStat] = useState<TokenStat>();\r\n  const { slowRefresh } = useRefresh();\r\n  const tombFinance = useTombFinance();\r\n\r\n  useEffect(() => {\r\n    async function fetchSharePrice() {\r\n      try {\r\n        setStat(await tombFinance.getShareStat());\r\n      } catch(err){\r\n        console.error(err)\r\n      }\r\n    }\r\n    fetchSharePrice();\r\n  }, [setStat, tombFinance, slowRefresh]);\r\n\r\n  return stat;\r\n};\r\n\r\nexport default useShareStats;\r\n","import { useEffect, useState } from 'react';\r\nimport useTombFinance from './useTombFinance';\r\nimport { LPStat } from '../tomb-finance/types';\r\nimport useRefresh from './useRefresh';\r\n\r\nconst useLpStats = (lpTicker: string) => {\r\n  const [stat, setStat] = useState<LPStat>();\r\n  const { slowRefresh } = useRefresh();\r\n  const tombFinance = useTombFinance();\r\n\r\n  useEffect(() => {\r\n    async function fetchLpPrice() {\r\n      try{\r\n        setStat(await tombFinance.getLPStat(lpTicker));\r\n      }\r\n      catch(err){\r\n        console.error(err);\r\n      }\r\n    }\r\n    fetchLpPrice();\r\n  }, [setStat, tombFinance, slowRefresh, lpTicker]);\r\n\r\n  return stat;\r\n};\r\n\r\nexport default useLpStats;\r\n","import { useCallback } from 'react';\r\nimport useTombFinance from './useTombFinance';\r\nimport { Bank } from '../tomb-finance';\r\nimport useHandleTransactionReceipt from './useHandleTransactionReceipt';\r\n\r\nconst useZap = (bank: Bank) => {\r\n  const tombFinance = useTombFinance();\r\n  const handleTransactionReceipt = useHandleTransactionReceipt();\r\n\r\n  const handleZap = useCallback(\r\n    (zappingToken: string, tokenName: string, amount: string) => {\r\n      handleTransactionReceipt(\r\n        tombFinance.zapIn(zappingToken, tokenName, amount),\r\n        `Zap ${amount} in ${bank.depositTokenName}.`,\r\n      );\r\n    },\r\n    [bank, tombFinance, handleTransactionReceipt],\r\n  );\r\n  return { onZap: handleZap };\r\n};\r\n\r\nexport default useZap;\r\n","import { useCallback, useEffect, useState } from 'react';\r\n\r\nimport useTombFinance from './useTombFinance';\r\nimport config from '../config';\r\nimport ERC20 from '../tomb-finance/ERC20';\r\n\r\nconst useStakedTokenPriceInDollars = (stakedTokenName: string, stakedToken: ERC20) => {\r\n  const [stakedTokenPriceInDollars, setStakedTokenPriceInDollars] = useState('0');\r\n  const tombFinance = useTombFinance();\r\n  const isUnlocked = tombFinance?.isUnlocked;\r\n\r\n  const fetchBalance = useCallback(async () => {\r\n    const balance = await tombFinance.getDepositTokenPriceInDollars(stakedTokenName, stakedToken);\r\n    setStakedTokenPriceInDollars(balance);\r\n  }, [stakedToken, stakedTokenName, tombFinance]);\r\n\r\n  useEffect(() => {\r\n    if (isUnlocked) {\r\n      fetchBalance().catch((err) => console.error(err.stack));\r\n\r\n      const refreshStakedTokenPriceInDollars = setInterval(fetchBalance, config.refreshInterval);\r\n      return () => clearInterval(refreshStakedTokenPriceInDollars);\r\n    }\r\n  }, [isUnlocked, setStakedTokenPriceInDollars, tombFinance, fetchBalance]);\r\n\r\n  return stakedTokenPriceInDollars;\r\n};\r\n\r\nexport default useStakedTokenPriceInDollars;\r\n","import React from 'react';\r\nimport styled from 'styled-components';\r\n\r\nexport interface IconProps {\r\n  color?: string;\r\n  children?: string;\r\n}\r\n\r\nconst Icon: React.FC = ({ children }) => <StyledIcon>{children}</StyledIcon>;\r\n\r\nconst StyledIcon = styled.div``;\r\n\r\nexport default Icon;\r\n","import React, { useContext } from 'react';\r\nimport { ThemeContext } from 'styled-components';\r\n\r\nimport Icon, { IconProps } from '../Icon';\r\n\r\nconst AddIcon: React.FC<IconProps> = ({ color }) => {\r\n  const { color: themeColor } = useContext(ThemeContext);\r\n  return (\r\n    <Icon>\r\n      <svg height=\"24\" viewBox=\"0 0 24 24\" width=\"24\">\r\n        <path d=\"M0 0h24v24H0z\" fill=\"none\" />\r\n        <path d=\"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\" fill={color ? color : themeColor.grey[400]} />\r\n      </svg>\r\n    </Icon>\r\n  );\r\n};\r\n\r\nexport default AddIcon;\r\n","import React, { useContext } from 'react';\r\nimport { ThemeContext } from 'styled-components';\r\n\r\nimport Icon, { IconProps } from '../Icon';\r\n\r\nconst RemoveIcon: React.FC<IconProps> = ({ color }) => {\r\n  const { color: themeColor } = useContext(ThemeContext);\r\n  return (\r\n    <Icon>\r\n      <svg viewBox=\"0 0 24 24\" fill={color ? color : themeColor.grey[400]} width=\"18px\" height=\"18px\">\r\n        <path d=\"M0 0h24v24H0z\" fill=\"none\" />\r\n        <path d=\"M19 13H5v-2h14v2z\" />\r\n      </svg>\r\n    </Icon>\r\n  );\r\n};\r\n\r\nexport default RemoveIcon;\r\n","import { BigNumber, ethers } from 'ethers';\r\nimport { useCallback, useMemo } from 'react';\r\nimport { useHasPendingApproval, useTransactionAdder } from '../state/transactions/hooks';\r\nimport useAllowance from './useAllowance';\r\nimport ERC20 from '../tomb-finance/ERC20';\r\nimport { DAI_TICKER, TOMB_TICKER, TSHARE_TICKER, ZAPPER_ROUTER_ADDR } from '../utils/constants';\r\nimport useTombFinance from './useTombFinance';\r\nimport useRefresh from \"./useRefresh\";\r\n\r\nconst APPROVE_AMOUNT = ethers.constants.MaxUint256;\r\nconst APPROVE_BASE_AMOUNT = BigNumber.from('1000000000000000000000000');\r\n\r\nexport enum ApprovalState {\r\n  UNKNOWN,\r\n  NOT_APPROVED,\r\n  PENDING,\r\n  APPROVED,\r\n}\r\n\r\n// returns a variable indicating the state of the approval and a function which approves if necessary or early returns\r\nfunction useApproveZapper(zappingToken: string): [ApprovalState, () => Promise<void>] {\r\n  const tombFinance = useTombFinance();\r\n  const { slowRefresh } = useRefresh();\r\n  let token: ERC20;\r\n  if (zappingToken === DAI_TICKER) token = tombFinance.FTM;\r\n  else if (zappingToken === TOMB_TICKER) token = tombFinance.TOMB;\r\n  else if (zappingToken === TSHARE_TICKER) token = tombFinance.TSHARE;\r\n  const pendingApproval = useHasPendingApproval(token.address, ZAPPER_ROUTER_ADDR);\r\n  const currentAllowance = useAllowance(token, ZAPPER_ROUTER_ADDR, pendingApproval);\r\n\r\n  // check the current approval status\r\n  const approvalState: ApprovalState = useMemo(() => {\r\n    // we might not have enough data to know whether or not we need to approve\r\n    if (!currentAllowance) return ApprovalState.UNKNOWN;\r\n\r\n    // amountToApprove will be defined if currentAllowance is\r\n    return currentAllowance.lt(APPROVE_BASE_AMOUNT)\r\n      ? pendingApproval\r\n        ? ApprovalState.PENDING\r\n        : ApprovalState.NOT_APPROVED\r\n      : ApprovalState.APPROVED;\r\n  }, [currentAllowance, pendingApproval, token, tombFinance, slowRefresh]);\r\n\r\n  const addTransaction = useTransactionAdder();\r\n\r\n  const approve = useCallback(async (): Promise<void> => {\r\n    if (approvalState !== ApprovalState.NOT_APPROVED) {\r\n      console.error('approve was called unnecessarily');\r\n      return;\r\n    }\r\n\r\n    const response = await token.approve(ZAPPER_ROUTER_ADDR, APPROVE_AMOUNT);\r\n    addTransaction(response, {\r\n      summary: `Approve ${token.symbol}`,\r\n      approval: {\r\n        tokenAddress: token.address,\r\n        spender: ZAPPER_ROUTER_ADDR,\r\n      },\r\n    });\r\n  }, [approvalState, token, addTransaction, slowRefresh]);\r\n\r\n  return [approvalState, approve];\r\n}\r\n\r\nexport default useApproveZapper;\r\n","import React, { useState, useMemo } from 'react';\r\n\r\nimport { Button, Select, MenuItem, InputLabel, Typography } from '@mui/material';\r\nimport { withStyles } from '@mui/styles'\r\n// import Button from '../../../components/Button'\r\nimport Modal, { ModalProps } from '../../../components/Modal';\r\nimport ModalActions from '../../../components/ModalActions';\r\nimport ModalTitle from '../../../components/ModalTitle';\r\nimport TokenInput from '../../../components/TokenInput';\r\nimport styled from 'styled-components';\r\n\r\nimport { getDisplayBalance } from '../../../utils/formatBalance';\r\nimport Label from '../../../components/Label';\r\nimport useLpStats from '../../../hooks/useLpStats';\r\nimport useTokenBalance from '../../../hooks/useTokenBalance';\r\nimport useTombFinance from '../../../hooks/useTombFinance';\r\nimport { useWallet } from 'use-wallet';\r\nimport useApproveZapper, { ApprovalState } from '../../../hooks/useApproveZapper';\r\nimport { TOMB_TICKER, TSHARE_TICKER, DAI_TICKER } from '../../../utils/constants';\r\nimport { Alert } from '@mui/lab';\r\nimport useRefresh from \"../../../hooks/useRefresh\";\r\n\r\ninterface ZapProps extends ModalProps {\r\n  onConfirm: (zapAsset: string, lpName: string, amount: string) => void;\r\n  tokenName?: string;\r\n  decimals?: number;\r\n}\r\n\r\nconst ZapModal: React.FC<ZapProps> = ({ onConfirm, onDismiss, tokenName = '', decimals = 18 }) => {\r\n  const tombFinance = useTombFinance();\r\n  const balance = useTokenBalance(tombFinance.FTM);\r\n  const ftmBalance = getDisplayBalance(balance);\r\n  const tombBalance = useTokenBalance(tombFinance.TOMB);\r\n  const tshareBalance = useTokenBalance(tombFinance.TSHARE);\r\n  const [val, setVal] = useState('');\r\n  const [zappingToken, setZappingToken] = useState(DAI_TICKER);\r\n  const [zappingTokenBalance, setZappingTokenBalance] = useState(ftmBalance);\r\n  const [estimate, setEstimate] = useState({ token0: '0', token1: '0' }); // token0 will always be FTM in this case\r\n  const [approveZapperStatus, approveZapper] = useApproveZapper(zappingToken);\r\n  const tombFtmLpStats = useLpStats('GAME-DAI-LP');\r\n  const tShareFtmLpStats = useLpStats('THEORY-DAI-LP');\r\n  const tombLPStats = useMemo(() => (tombFtmLpStats ? tombFtmLpStats : null), [tombFtmLpStats]);\r\n  const tshareLPStats = useMemo(() => (tShareFtmLpStats ? tShareFtmLpStats : null), [tShareFtmLpStats]);\r\n  const ftmAmountPerLP = tokenName.startsWith(TOMB_TICKER) ? tombLPStats?.ftmAmount : tshareLPStats?.ftmAmount;\r\n  if(zappingToken === DAI_TICKER && zappingTokenBalance !== ftmBalance) setZappingTokenBalance(ftmBalance);\r\n  /**\r\n   * Checks if a value is a valid number or not\r\n   * @param n is the value to be evaluated for a number\r\n   * @returns\r\n   */\r\n  function isNumeric(n: any) {\r\n    return !isNaN(parseFloat(n)) && isFinite(n);\r\n  }\r\n  const handleChangeAsset = (event: any) => {\r\n    const value = event.target.value;\r\n    setZappingToken(value);\r\n    setZappingTokenBalance(ftmBalance);\r\n    if (event.target.value === TSHARE_TICKER) {\r\n      setZappingTokenBalance(getDisplayBalance(tshareBalance, decimals));\r\n    }\r\n    if (event.target.value === TOMB_TICKER) {\r\n      setZappingTokenBalance(getDisplayBalance(tombBalance, decimals));\r\n    }\r\n  };\r\n\r\n  const handleChange = async (e: any) => {\r\n    if (e.currentTarget.value === '' || e.currentTarget.value === 0) {\r\n      setVal(e.currentTarget.value);\r\n      setEstimate({ token0: '0', token1: '0' });\r\n    }\r\n    if (!isNumeric(e.currentTarget.value)) return;\r\n    setVal(e.currentTarget.value);\r\n    const estimateZap = await tombFinance.estimateZapIn(zappingToken, tokenName, String(e.currentTarget.value));\r\n    setEstimate({ token0: estimateZap[0].toString(), token1: estimateZap[1].toString() });\r\n  };\r\n\r\n  const handleSelectMax = async () => {\r\n    setVal(zappingTokenBalance);\r\n    const estimateZap = await tombFinance.estimateZapIn(zappingToken, tokenName, String(zappingTokenBalance));\r\n    setEstimate({ token0: estimateZap[0].toString(), token1: estimateZap[1].toString() });\r\n  };\r\n\r\n  return (\r\n    <Modal>\r\n      <ModalTitle text={`Zap in ${tokenName}`} />\r\n      {/*<Typography variant=\"h6\" align=\"center\">*/}\r\n      {/*  Powered by{' '}*/}\r\n      {/*  <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://mlnl.finance\">*/}\r\n      {/*    mlnl.finance*/}\r\n      {/*  </a>*/}\r\n      {/*</Typography>*/}\r\n\r\n      <StyledActionSpacer />\r\n      <InputLabel style={{ color: '#dd3322' }} id=\"label\">\r\n        Select asset to zap with\r\n      </InputLabel>\r\n      <Select\r\n        onChange={handleChangeAsset}\r\n        style={{ color: '#dd3322' }}\r\n        labelId=\"label\"\r\n        id=\"select\"\r\n        value={zappingToken}\r\n      >\r\n        <StyledMenuItem value={DAI_TICKER}>DAI</StyledMenuItem>\r\n          <StyledMenuItem value={TOMB_TICKER}>GAME</StyledMenuItem>\r\n          <StyledMenuItem value={TSHARE_TICKER}>THEORY</StyledMenuItem>\r\n      </Select>\r\n      <TokenInput\r\n        onSelectMax={handleSelectMax}\r\n        onChange={handleChange}\r\n        value={val}\r\n        max={zappingTokenBalance}\r\n        symbol={zappingToken}\r\n      />\r\n      <Label text=\"Zap Estimations\" />\r\n      <StyledDescriptionText>\r\n        {' '}\r\n        {tokenName}: {Number(estimate.token0) / Number(ftmAmountPerLP)}\r\n      </StyledDescriptionText>\r\n      <StyledDescriptionText>\r\n        {' '}\r\n        ({Number(estimate.token0)} {DAI_TICKER} / {Number(estimate.token1)}{' '}\r\n        {tokenName.startsWith(TOMB_TICKER) ? TOMB_TICKER : TSHARE_TICKER}){' '}\r\n      </StyledDescriptionText>\r\n      <ModalActions>\r\n        <Button\r\n          color=\"primary\"\r\n          variant=\"contained\"\r\n          onClick={() =>\r\n            approveZapperStatus !== ApprovalState.APPROVED ? approveZapper() : onConfirm(zappingToken, tokenName, val)\r\n          }\r\n        >\r\n          {approveZapperStatus !== ApprovalState.APPROVED ? 'Approve' : \"Let's go\"}\r\n        </Button>\r\n      </ModalActions>\r\n\r\n      <StyledActionSpacer />\r\n        <Alert variant=\"filled\" severity=\"warning\">\r\n            After zapping, make sure to add your LP using the + button!\r\n        </Alert>\r\n      <Alert variant=\"filled\" severity=\"warning\">\r\n        Zapping incurs a 0.5% convenience fee and 0.5% slippage. Beta feature. Use at your own risk!\r\n      </Alert>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nconst StyledActionSpacer = styled.div`\r\n  height: ${(props) => props.theme.spacing[4]}px;\r\n  width: ${(props) => props.theme.spacing[4]}px;\r\n`;\r\n\r\nconst StyledDescriptionText = styled.div`\r\n  align-items: center;\r\n  color: ${(props) => props.theme.color.grey[400]};\r\n  display: flex;\r\n  font-size: 14px;\r\n  font-weight: 700;\r\n  height: 22px;\r\n  justify-content: flex-start;\r\n`;\r\nconst StyledMenuItem = withStyles({\r\n  root: {\r\n    backgroundColor: 'white',\r\n    color: '#dd3322',\r\n    '&:hover': {\r\n      backgroundColor: 'grey',\r\n      color: '#dd3322',\r\n    },\r\n    selected: {\r\n      backgroundColor: 'black',\r\n    },\r\n  },\r\n})(MenuItem);\r\n\r\nexport default ZapModal;\r\n","import React from 'react';\r\nimport styled from 'styled-components';\r\n\r\ninterface PageHeaderProps {\r\n  icon: React.ReactNode;\r\n  subtitle?: string;\r\n  title?: string;\r\n}\r\n\r\nconst PageHeader: React.FC<PageHeaderProps> = ({ icon, subtitle, title }) => {\r\n  return (\r\n    <StyledPageHeader>\r\n      {/* <StyledIcon>{icon}</StyledIcon> */}\r\n      <StyledTitle>{title}</StyledTitle>\r\n      <StyledSubtitle>{subtitle}</StyledSubtitle>\r\n    </StyledPageHeader>\r\n  );\r\n};\r\n\r\nconst StyledPageHeader = styled.div`\r\n  align-items: center;\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding-bottom: ${(props) => props.theme.spacing[6]}px;\r\n  padding-top: ${(props) => props.theme.spacing[6]}px;\r\n  max-width: 610px;\r\n  width: 100%;\r\n  margin: 0 auto;\r\n  text-align: center;\r\n`;\r\n\r\nconst StyledTitle = styled.h1`\r\n  color: ${(props) => props.theme.color.grey[100]};\r\n  font-size: 36px;\r\n  font-weight: 700;\r\n  margin: 0;\r\n  padding: 0;\r\n`;\r\n\r\nconst StyledSubtitle = styled.h3`\r\n  color: ${(props) => props.theme.color.grey[400]};\r\n  font-size: 18px;\r\n  font-weight: 400;\r\n  margin: 0;\r\n  padding: 0;\r\n  text-align: center;\r\n`;\r\n\r\nexport default PageHeader;\r\n","import React from 'react';\r\nimport styled from 'styled-components';\r\n\r\nimport { Link } from 'react-router-dom';\r\n\r\ninterface IconButtonProps {\r\n  children?: React.ReactNode;\r\n  disabled?: boolean;\r\n  onClick?: () => void;\r\n  to?: string;\r\n}\r\n\r\nconst IconButton: React.FC<IconButtonProps> = ({ children, disabled, onClick, to }) => {\r\n  return (\r\n    <StyledButton disabled={disabled} onClick={onClick}>\r\n      {!!to ? <StyledLink to={to}>{children}</StyledLink> : children}\r\n    </StyledButton>\r\n  );\r\n};\r\n\r\ninterface StyledButtonProps {\r\n  disabled?: boolean;\r\n}\r\n/*\r\n  box-shadow: 6px 6px 12px ${props => props.theme.color.grey[600]},\r\n    -12px -12px 24px ${props => props.theme.color.grey[800]}aa;\r\n */\r\n\r\nconst StyledButton = styled.button<StyledButtonProps>`\r\n  align-items: center;\r\n  // background-color: ${(props) => props.theme.color.grey[!props.disabled ? 700 : 900]};\r\n  background-color: ${(props) => (!props.disabled ? '#FF4949' : props.theme.color.grey[900])};\r\n  border: 0;\r\n  border-radius: 10px !important;\r\n  color: ${(props) => (!props.disabled ? props.theme.color.primary.main : props.theme.color.grey[500])};\r\n  cursor: pointer;\r\n  display: flex;\r\n  font-weight: 700;\r\n  height: 56px;\r\n  justify-content: center;\r\n  letter-spacing: 1px;\r\n  outline: none;\r\n  padding: 0;\r\n  margin: 0;\r\n  pointer-events: ${(props) => (!props.disabled ? undefined : 'none')};\r\n  text-transform: uppercase;\r\n  width: 56px;\r\n  &:hover {\r\n    // background-color: ${(props) => props.theme.color.grey[800]};\r\n    background-color: #ff6464;\r\n  }\r\n`;\r\n\r\nconst StyledLink = styled(Link)`\r\n  align-items: center;\r\n  color: inherit;\r\n  display: flex;\r\n  flex: 1;\r\n  height: 56px;\r\n  justify-content: center;\r\n  margin: 0 ${(props) => -props.theme.spacing[4]}px;\r\n  padding: 0 ${(props) => props.theme.spacing[4]}px;\r\n  text-decoration: none;\r\n`;\r\n\r\nexport default IconButton;\r\n","import { useEffect, useState } from \"react\"\r\nimport Web3 from \"web3\"\r\nimport { web3ProviderFrom } from \"../tomb-finance/ether-utils\"\r\nimport { getBalance } from \"../utils/formatBalance\"\r\nimport axios from 'axios'\r\n\r\nconst web3 = new Web3(\"https://rpcapi.fantom.network/\")\r\n\r\nconst ERC20ABI = [{ \"constant\": true, \"inputs\": [], \"name\": \"name\", \"outputs\": [ { \"name\": \"\", \"type\": \"string\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": false, \"inputs\": [ { \"name\": \"_spender\", \"type\": \"address\" }, { \"name\": \"_value\", \"type\": \"uint256\" } ], \"name\": \"approve\", \"outputs\": [ { \"name\": \"\", \"type\": \"bool\" } ], \"payable\": false, \"stateMutability\": \"nonpayable\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [], \"name\": \"totalSupply\", \"outputs\": [ { \"name\": \"\", \"type\": \"uint256\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": false, \"inputs\": [ { \"name\": \"_from\", \"type\": \"address\" }, { \"name\": \"_to\", \"type\": \"address\" }, { \"name\": \"_value\", \"type\": \"uint256\" } ], \"name\": \"transferFrom\", \"outputs\": [ { \"name\": \"\", \"type\": \"bool\" } ], \"payable\": false, \"stateMutability\": \"nonpayable\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [], \"name\": \"decimals\", \"outputs\": [ { \"name\": \"\", \"type\": \"uint8\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [ { \"name\": \"_owner\", \"type\": \"address\" } ], \"name\": \"balanceOf\", \"outputs\": [ { \"name\": \"balance\", \"type\": \"uint256\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [], \"name\": \"symbol\", \"outputs\": [ { \"name\": \"\", \"type\": \"string\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": false, \"inputs\": [ { \"name\": \"_to\", \"type\": \"address\" }, { \"name\": \"_value\", \"type\": \"uint256\" } ], \"name\": \"transfer\", \"outputs\": [ { \"name\": \"\", \"type\": \"bool\" } ], \"payable\": false, \"stateMutability\": \"nonpayable\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [ { \"name\": \"_owner\", \"type\": \"address\" }, { \"name\": \"_spender\", \"type\": \"address\" } ], \"name\": \"allowance\", \"outputs\": [ { \"name\": \"\", \"type\": \"uint256\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"payable\": true, \"stateMutability\": \"payable\", \"type\": \"fallback\" }, { \"anonymous\": false, \"inputs\": [ { \"indexed\": true, \"name\": \"owner\", \"type\": \"address\" }, { \"indexed\": true, \"name\": \"spender\", \"type\": \"address\" }, { \"indexed\": false, \"name\": \"value\", \"type\": \"uint256\" } ], \"name\": \"Approval\", \"type\": \"event\" }, { \"anonymous\": false, \"inputs\": [ { \"indexed\": true, \"name\": \"from\", \"type\": \"address\" }, { \"indexed\": true, \"name\": \"to\", \"type\": \"address\" }, { \"indexed\": false, \"name\": \"value\", \"type\": \"uint256\" } ], \"name\": \"Transfer\", \"type\": \"event\" } ]\r\nconst treasuryAddress = \"0x8f555E00ea0FAc871b3Aa70C015915dB094E7f88\"\r\n\r\n// const assetList = [\r\n//     \"0xc54A1684fD1bef1f077a336E6be4Bd9a3096a6Ca\", // 2shares\r\n//     \"0x6398ACBBAB2561553a9e458Ab67dCFbD58944e52\", // 2shares/FTM LP\r\n//     \"0x83A52eff2E9D112E9B022399A9fD22a9DB7d33Ae\", // Game/dai\r\n//     \"0x6437ADAC543583C4b31Bf0323A0870430F5CC2e7\", // Theory\r\n//     \"0xd352daC95a91AfeFb112DBBB3463ccfA5EC15b65\", // Theory/dai\r\n// ]\r\n\r\n// const contracts = assetList.map(asset => new web3.eth.Contract(ERC20ABI, asset))\r\n\r\n// function useTotalTreasuryBalance() {\r\n//     const [ prices, setPrices ] = useState(assetList.map(asset => {\r\n//         return { token: asset, value: 0 }\r\n//     }))\r\n//     useEffect(() => {\r\n//         getPrices()\r\n//     }, [])\r\n\r\n//     async function getPrices() {\r\n//         for (const token of contracts) {\r\n//             console.log(token)\r\n//         }\r\n//     }\r\n\r\n//     return prices\r\n// }\r\n\r\nfunction useTotalTreasuryBalance() {\r\n    const Theory = new web3.eth.Contract(ERC20ABI, '0x6437ADAC543583C4b31Bf0323A0870430F5CC2e7')\r\n    const DAI = new web3.eth.Contract(ERC20ABI, '0x21be370d5312f44cb42ce377bc9b8a0cef1a4c83')\r\n    const [balance, setBalance] = useState(0)\r\n    const [balance_2shares_dai, setBalance_2shares_dai] = useState(0)\r\n    const [balance_game_dai, setBalance_game_dai] = useState(0)\r\n    const [balancetheory_dai, setBalancetheory_dai] = useState(0)\r\n    const [balance_game, setBalance_game] = useState(0)\r\n    const [balancetheory, setBalancetheory] = useState(0)\r\n    const [balance_2shares, setBalance_2shares] = useState(0)\r\n\r\n    useEffect(() => {\r\n        getBalance()\r\n        const interval = setInterval(() => {\r\n            getBalance()\r\n        }, 30000)\r\n        return () => {\r\n            clearInterval(interval);\r\n        }\r\n    }, [])\r\n\r\n    return { balance, balance_2shares_dai, balance_game_dai, balancetheory_dai, balance_game, balancetheory, balance_2shares }\r\n\r\n    async function getBalance() {\r\n        // const { data2omb } = await axios('https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&ids=2omb-fi')\r\n        // const { data2shares } = await axios('https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&ids=2share')\r\n        // const { dataGame } = await axios('https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&ids=30mb-token')\r\n        \r\n        const { data } = await axios('https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&ids=Theory')\r\n        const theoryBalance = web3.utils.fromWei(await Theory.methods.balanceOf(treasuryAddress).call())\r\n        const valueTheory = theoryBalance * 0//data[0].current_price\r\n\r\n        const data2sharesAndGame = await axios('https://openapi.debank.com/v1/user/chain_balance?id=0x8f555E00ea0FAc871b3Aa70C015915dB094E7f88&chain_id=ftm')\r\n\r\n        console.log(`3Shares USD: $${valueTheory}`)\r\n        console.log(`2Shares + Game: $${data2sharesAndGame.data.usd_value}`)\r\n        const LP_2shares_dai = await getLPPrice('0x6398ACBBAB2561553a9e458Ab67dCFbD58944e52', '0xc54a1684fd1bef1f077a336e6be4bd9a3096a6ca')\r\n        const LP_game_dai = await getLPPrice('0x83A52eff2E9D112E9B022399A9fD22a9DB7d33Ae', '0x14def7584a6c52f470ca4f4b9671056b22f4ffde')\r\n        const LPtheory_dai = await getLPPrice('0xd352daC95a91AfeFb112DBBB3463ccfA5EC15b65', '0x6437adac543583c4b31bf0323a0870430f5cc2e7')\r\n        setBalance(data2sharesAndGame.data.usd_value + valueTheory + LP_2shares_dai + LP_game_dai + LPtheory_dai)\r\n        setBalance_2shares_dai(LP_2shares_dai)\r\n        setBalance_game_dai(LP_game_dai)\r\n        setBalancetheory_dai(LPtheory_dai)\r\n        setBalance_game(await getGameBalance())\r\n        setBalancetheory(await getTheoryBalance())\r\n        setBalance_2shares(await get2sharesBalance())\r\n    }\r\n\r\n    async function getGameBalance() {\r\n        const tokenGame = new web3.eth.Contract(ERC20ABI, '0x14DEf7584A6c52f470Ca4F4b9671056b22f4FfDE')\r\n        const { data } = await axios(`https://fantom.api.0x.org/swap/v1/quote?buyToken=USDC&sellToken=0x14DEf7584A6c52f470Ca4F4b9671056b22f4FfDE&sellAmount=100000000000000000`)\r\n        const usdValue = Number(web3.utils.fromWei(await tokenGame.methods.balanceOf(treasuryAddress).call())) * Number(data.price)\r\n\r\n        return usdValue\r\n    }\r\n\r\n    async function getTheoryBalance() {\r\n        const tokenTheory = new web3.eth.Contract(ERC20ABI, '0x6437ADAC543583C4b31Bf0323A0870430F5CC2e7')\r\n        const { data } = await axios(`https://fantom.api.0x.org/swap/v1/quote?buyToken=USDC&sellToken=0x6437ADAC543583C4b31Bf0323A0870430F5CC2e7&sellAmount=100000000000000000`)\r\n        const usdValue = Number(web3.utils.fromWei(await tokenTheory.methods.balanceOf(treasuryAddress).call())) * Number(data.price)\r\n\r\n        return usdValue\r\n    }\r\n\r\n    async function get2sharesBalance() {\r\n        const token2shares = new web3.eth.Contract(ERC20ABI, '0xc54A1684fD1bef1f077a336E6be4Bd9a3096a6Ca')\r\n        const { data } = await axios(`https://fantom.api.0x.org/swap/v1/quote?buyToken=USDC&sellToken=0xc54A1684fD1bef1f077a336E6be4Bd9a3096a6Ca&sellAmount=100000000000000000`)\r\n        const usdValue = Number(web3.utils.fromWei(await token2shares.methods.balanceOf(treasuryAddress).call())) * Number(data.price)\r\n\r\n        return usdValue\r\n    }\r\n\r\n    async function getLPPrice(LPAddress, tokenAddress) {\r\n        const token = new web3.eth.Contract(ERC20ABI, tokenAddress)\r\n        const LPtoken = new web3.eth.Contract(ERC20ABI, LPAddress)\r\n        const { data } = await axios('https://api.binance.com/api/v1/ticker/price?symbol=FTMUSDT')\r\n        const daiValue = Number(web3.utils.fromWei(await DAI.methods.balanceOf(LPAddress).call())) * Number(data.price)\r\n\r\n        const tokenValue = Number(await getTokenPrice(tokenAddress)) * Number(web3.utils.fromWei(await token.methods.balanceOf(LPAddress).call()))\r\n\r\n        const OneTokenValue = (daiValue + tokenValue) / Number(web3.utils.fromWei(await LPtoken.methods.totalSupply().call()))\r\n\r\n        const total = OneTokenValue * Number(web3.utils.fromWei(await LPtoken.methods.balanceOf(treasuryAddress).call()))\r\n\r\n        console.log(daiValue)\r\n        console.log(tokenValue)\r\n        console.log(OneTokenValue)\r\n        console.log(total)\r\n\r\n        return total\r\n    }\r\n\r\n    async function getTokenPrice(tokenAddress) {\r\n        const { data } = await axios(`https://fantom.api.0x.org/swap/v1/quote?buyToken=USDC&sellToken=${tokenAddress}&sellAmount=100000000000000000`)\r\n        return data.price\r\n    }\r\n}\r\n\r\nexport default useTotalTreasuryBalance","import { useContext } from 'react';\r\nimport { Context as BanksContext } from '../contexts/Banks';\r\n\r\nconst useBanks = () => {\r\n  const { banks } = useContext(BanksContext);\r\n  return [banks];\r\n};\r\n\r\nexport default useBanks;\r\n","import { useCallback, useEffect, useState } from 'react';\r\nimport { BigNumber } from 'ethers';\r\nimport useTombFinance from './useTombFinance';\r\nimport { ContractName } from '../tomb-finance';\r\nimport config from '../config';\r\n\r\nconst useEarnings = (poolName: ContractName, earnTokenName: String, poolId: Number) => {\r\n  const [balance, setBalance] = useState(BigNumber.from(0));\r\n  const tombFinance = useTombFinance();\r\n  const isUnlocked = tombFinance?.isUnlocked;\r\n\r\n  const fetchBalance = useCallback(async () => {\r\n    const balance = await tombFinance.earnedFromBank(poolName, earnTokenName, poolId, tombFinance.myAccount);\r\n    setBalance(balance);\r\n  }, [poolName, earnTokenName, poolId, tombFinance]);\r\n\r\n  useEffect(() => {\r\n    if (isUnlocked) {\r\n      fetchBalance().catch((err) => console.error(err.stack));\r\n\r\n      const refreshBalance = setInterval(fetchBalance, config.refreshInterval);\r\n      return () => clearInterval(refreshBalance);\r\n    }\r\n  }, [isUnlocked, poolName, tombFinance, fetchBalance]);\r\n\r\n  return balance;\r\n};\r\n\r\nexport default useEarnings;\r\n","import { useCallback } from 'react';\r\nimport useTombFinance from './useTombFinance';\r\nimport useHandleTransactionReceipt from './useHandleTransactionReceipt';\r\nimport { Bank } from '../tomb-finance';\r\n\r\nconst useHarvest = (bank: Bank) => {\r\n  const tombFinance = useTombFinance();\r\n  const handleTransactionReceipt = useHandleTransactionReceipt();\r\n\r\n  const handleReward = useCallback(() => {\r\n    handleTransactionReceipt(\r\n      tombFinance.harvest(bank.contract, bank.poolId),\r\n      `Claim ${bank.earnTokenName} from ${bank.contract}`,\r\n    );\r\n  }, [bank, tombFinance, handleTransactionReceipt]);\r\n\r\n  return { onReward: handleReward };\r\n};\r\n\r\nexport default useHarvest;\r\n","import React, { useMemo } from 'react';\r\nimport styled from 'styled-components';\r\n\r\nimport { Button, Card, CardContent } from '@mui/material';\r\n// import Button from '../../../components/Button';\r\n// import Card from '../../../components/Card';\r\n// import CardContent from '../../../components/CardContent';\r\nimport CardIcon from '../../../components/CardIcon';\r\nimport Label from '../../../components/Label';\r\nimport Value from '../../../components/Value';\r\n\r\nimport useEarnings from '../../../hooks/useEarnings';\r\nimport useHarvest from '../../../hooks/useHarvest';\r\n\r\nimport { getDisplayBalance } from '../../../utils/formatBalance';\r\nimport TokenSymbol from '../../../components/TokenSymbol';\r\nimport { Bank } from '../../../tomb-finance';\r\nimport useTombStats from '../../../hooks/useTombStats';\r\nimport useShareStats from '../../../hooks/usetShareStats';\r\n\r\ninterface HarvestProps {\r\n  bank: Bank;\r\n  rewardsLocked : number;\r\n}\r\n\r\nconst Harvest: React.FC<HarvestProps> = ({ bank, rewardsLocked }) => {\r\n  const earnings = useEarnings(bank.contract, bank.earnTokenName, bank.poolId);\r\n  const { onReward } = useHarvest(bank);\r\n  const tombStats = useTombStats();\r\n  const tShareStats = useShareStats();\r\n\r\n  const tokenName = bank.earnTokenName === 'THEORY' ? 'THEORY' : 'GAME';\r\n  const tokenStats = bank.earnTokenName === 'THEORY' ? tShareStats : tombStats;\r\n  const tokenPriceInDollars = useMemo(\r\n    () => (tokenStats ? Number(tokenStats.priceInDollars).toFixed(2) : null),\r\n    [tokenStats],\r\n  );\r\n  const earnedInDollars = (Number(tokenPriceInDollars) * Number(getDisplayBalance(earnings))).toFixed(2);\r\n  return (\r\n    <Card style={{ boxShadow: 'none !important'}}>\r\n      <CardContent>\r\n        <StyledCardContentInner>\r\n          <StyledCardHeader>\r\n            <CardIcon>\r\n              <TokenSymbol symbol={bank.earnToken.symbol} />\r\n            </CardIcon>\r\n            <Value value={getDisplayBalance(earnings)} />\r\n            <Label text={` $${earnedInDollars}`} color=\"#89cff0\" />\r\n            <Label text={`Total Earned`} />\r\n            <br/>\r\n            <Value value={`${(Number(getDisplayBalance(earnings)) * (100.0-rewardsLocked) / 100.0).toFixed(4)}`} />\r\n            <Label text={` $${(Number(earnedInDollars) * (100.0-rewardsLocked) / 100.0).toFixed(2)}`} color=\"#89cff0\" />\r\n            <Label text={`${tokenName} Earned`} />\r\n            <br/>\r\n            <Value value={`${(Number(getDisplayBalance(earnings)) * rewardsLocked / 100.0).toFixed(4)}`} />\r\n            <Label text={` $${(Number(earnedInDollars) * rewardsLocked / 100.0).toFixed(2)}`} color=\"#89cff0\" />\r\n            <Label text={`L${tokenName} Earned`} />\r\n          </StyledCardHeader>\r\n          <StyledCardActions>\r\n            <Button onClick={onReward} disabled={earnings.eq(0)} color=\"primary\" variant=\"contained\">\r\n              Claim\r\n            </Button>\r\n          </StyledCardActions>\r\n        </StyledCardContentInner>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n\r\nconst StyledCardHeader = styled.div`\r\n  align-items: center;\r\n  display: flex;\r\n  flex-direction: column;\r\n`;\r\nconst StyledCardActions = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  margin-top: ${(props) => props.theme.spacing[6]}px;\r\n  width: 100%;\r\n`;\r\n\r\nconst StyledCardContentInner = styled.div`\r\n  align-items: center;\r\n  display: flex;\r\n  flex: 1;\r\n  flex-direction: column;\r\n  justify-content: space-between;\r\n`;\r\n\r\nexport default Harvest;\r\n","import { useCallback } from 'react';\r\nimport useTombFinance from './useTombFinance';\r\nimport { Bank } from '../tomb-finance';\r\nimport useHandleTransactionReceipt from './useHandleTransactionReceipt';\r\nimport { parseUnits } from 'ethers/lib/utils';\r\n\r\nconst useStake = (bank: Bank) => {\r\n  const tombFinance = useTombFinance();\r\n  const handleTransactionReceipt = useHandleTransactionReceipt();\r\n\r\n  const handleStake = useCallback(\r\n    (amount: string) => {\r\n      const amountBn = parseUnits(amount, bank.depositToken.decimal);\r\n      handleTransactionReceipt(\r\n        tombFinance.stake(bank.contract, bank.poolId, amountBn),\r\n        `Stake ${amount} ${bank.depositTokenName} to ${bank.contract}`,\r\n      );\r\n    },\r\n    [bank, tombFinance, handleTransactionReceipt],\r\n  );\r\n  return { onStake: handleStake };\r\n};\r\n\r\nexport default useStake;\r\n","import { useCallback, useEffect, useState } from 'react';\r\n\r\nimport { BigNumber } from 'ethers';\r\nimport useTombFinance from './useTombFinance';\r\nimport { ContractName } from '../tomb-finance';\r\nimport config from '../config';\r\n\r\nconst useStakedBalance = (poolName: ContractName, poolId: Number) => {\r\n  const [balance, setBalance] = useState(BigNumber.from(0));\r\n  const tombFinance = useTombFinance();\r\n  const isUnlocked = tombFinance?.isUnlocked;\r\n\r\n  const fetchBalance = useCallback(async () => {\r\n    const balance = await tombFinance.stakedBalanceOnBank(poolName, poolId, tombFinance.myAccount);\r\n    setBalance(balance);\r\n  }, [poolName, poolId, tombFinance]);\r\n\r\n  useEffect(() => {\r\n    if (isUnlocked) {\r\n      fetchBalance().catch((err) => console.error(err.stack));\r\n\r\n      const refreshBalance = setInterval(fetchBalance, config.refreshInterval);\r\n      return () => clearInterval(refreshBalance);\r\n    }\r\n  }, [isUnlocked, poolName, setBalance, tombFinance, fetchBalance]);\r\n\r\n  return balance;\r\n};\r\n\r\nexport default useStakedBalance;\r\n","import { useCallback } from 'react';\r\nimport useTombFinance from './useTombFinance';\r\nimport { Bank } from '../tomb-finance';\r\nimport useHandleTransactionReceipt from './useHandleTransactionReceipt';\r\nimport { parseUnits } from 'ethers/lib/utils';\r\n\r\nconst useWithdraw = (bank: Bank) => {\r\n  const tombFinance = useTombFinance();\r\n  const handleTransactionReceipt = useHandleTransactionReceipt();\r\n\r\n  const handleWithdraw = useCallback(\r\n    (amount: string) => {\r\n      const amountBn = parseUnits(amount, bank.depositToken.decimal);\r\n      handleTransactionReceipt(\r\n        tombFinance.unstake(bank.contract, bank.poolId, amountBn),\r\n        `Withdraw ${amount} ${bank.depositTokenName} from ${bank.contract} `,\r\n      );\r\n    },\r\n    [bank, tombFinance, handleTransactionReceipt],\r\n  );\r\n  return { onWithdraw: handleWithdraw };\r\n};\r\n\r\nexport default useWithdraw;\r\n","import React, { useCallback, useMemo, useState } from 'react';\r\n\r\nimport { Button } from '@mui/material';\r\n// import Button from '../../../components/Button'\r\nimport Modal, { ModalProps } from '../../../components/Modal';\r\nimport ModalActions from '../../../components/ModalActions';\r\nimport ModalTitle from '../../../components/ModalTitle';\r\nimport TokenInput from '../../../components/TokenInput';\r\n\r\nimport { getFullDisplayBalance } from '../../../utils/formatBalance';\r\nimport { BigNumber } from 'ethers';\r\n\r\ninterface DepositModalProps extends ModalProps {\r\n  max: BigNumber;\r\n  decimals: number;\r\n  onConfirm: (amount: string) => void;\r\n  tokenName?: string;\r\n}\r\n\r\nconst DepositModal: React.FC<DepositModalProps> = ({ max, decimals, onConfirm, onDismiss, tokenName = '' }) => {\r\n  const [val, setVal] = useState('');\r\n\r\n  const fullBalance = useMemo(() => {\r\n    return getFullDisplayBalance(max, decimals, false);\r\n  }, [max, decimals]);\r\n\r\n  const handleChange = useCallback(\r\n    (e: React.FormEvent<HTMLInputElement>) => {\r\n      setVal(e.currentTarget.value);\r\n    },\r\n    [setVal],\r\n  );\r\n\r\n  const handleSelectMax = useCallback(() => {\r\n    setVal(fullBalance);\r\n  }, [fullBalance, setVal]);\r\n\r\n  return (\r\n    <Modal>\r\n      <ModalTitle text={`Deposit ${tokenName}`} />\r\n      <TokenInput\r\n        value={val}\r\n        onSelectMax={handleSelectMax}\r\n        onChange={handleChange}\r\n        max={fullBalance}\r\n        symbol={tokenName}\r\n      />\r\n      <ModalActions>\r\n        {/* <Button color=\"secondary\" variant=\"outlined\" onClick={onDismiss}>Cancel</Button> */}\r\n        <Button color=\"primary\" variant=\"contained\" onClick={() => onConfirm(val)}>\r\n          Confirm\r\n        </Button>\r\n      </ModalActions>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default DepositModal;\r\n","import React, { useCallback, useMemo, useState } from 'react';\r\n\r\nimport { Button } from '@mui/material';\r\n// import Button from '../../../components/Button'\r\nimport Modal, { ModalProps } from '../../../components/Modal';\r\nimport ModalActions from '../../../components/ModalActions';\r\nimport ModalTitle from '../../../components/ModalTitle';\r\nimport TokenInput from '../../../components/TokenInput';\r\n\r\nimport { getFullDisplayBalance } from '../../../utils/formatBalance';\r\nimport { BigNumber } from 'ethers';\r\n\r\ninterface WithdrawModalProps extends ModalProps {\r\n  max: BigNumber;\r\n  onConfirm: (amount: string) => void;\r\n  tokenName?: string;\r\n  decimals?: number;\r\n}\r\n\r\nconst WithdrawModal: React.FC<WithdrawModalProps> = ({ onConfirm, onDismiss, max, tokenName = '', decimals = 18 }) => {\r\n  const [val, setVal] = useState('');\r\n\r\n  const fullBalance = useMemo(() => {\r\n    return getFullDisplayBalance(max, decimals, false);\r\n  }, [max, decimals]);\r\n\r\n  const handleChange = useCallback(\r\n    (e: React.FormEvent<HTMLInputElement>) => {\r\n      setVal(e.currentTarget.value);\r\n    },\r\n    [setVal],\r\n  );\r\n\r\n  const handleSelectMax = useCallback(() => {\r\n    setVal(fullBalance);\r\n  }, [fullBalance, setVal]);\r\n\r\n  return (\r\n    <Modal>\r\n      <ModalTitle text={`Withdraw ${tokenName}`} />\r\n      <TokenInput\r\n        onSelectMax={handleSelectMax}\r\n        onChange={handleChange}\r\n        value={val}\r\n        max={fullBalance}\r\n        symbol={tokenName}\r\n      />\r\n      <ModalActions>\r\n        <Button color=\"primary\" variant=\"contained\" onClick={() => onConfirm(val)}>\r\n          Confirm\r\n        </Button>\r\n        {/* <Button color=\"secondary\" onClick={onDismiss}>Cancel</Button> */}\r\n\r\n        {/* <Button text=\"Cancel\" variant=\"secondary\" onClick={onDismiss} />\r\n        <Button text=\"Confirm\" onClick={() => onConfirm(val)} /> */}\r\n      </ModalActions>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default WithdrawModal;\r\n","import React, { useMemo, useContext } from 'react';\r\nimport styled from 'styled-components';\r\n\r\n// import Button from '../../../components/Button';\r\nimport { Button, Card, CardContent } from '@mui/material';\r\n// import Card from '../../../components/Card';\r\n// import CardContent from '../../../components/CardContent';\r\nimport CardIcon from '../../../components/CardIcon';\r\nimport { AddIcon, RemoveIcon } from '../../../components/icons';\r\nimport FlashOnIcon from '@mui/icons-material/FlashOn';\r\nimport IconButton from '../../../components/IconButton';\r\nimport Label from '../../../components/Label';\r\nimport Value from '../../../components/Value';\r\nimport { ThemeContext } from 'styled-components';\r\n\r\nimport useApprove, { ApprovalState } from '../../../hooks/useApprove';\r\nimport useModal from '../../../hooks/useModal';\r\nimport useStake from '../../../hooks/useStake';\r\nimport useZap from '../../../hooks/useZap';\r\nimport useStakedBalance from '../../../hooks/useStakedBalance';\r\nimport useStakedTokenPriceInDollars from '../../../hooks/useStakedTokenPriceInDollars';\r\nimport useTokenBalance from '../../../hooks/useTokenBalance';\r\nimport useWithdraw from '../../../hooks/useWithdraw';\r\n\r\nimport { getDisplayBalance } from '../../../utils/formatBalance';\r\n\r\nimport DepositModal from './DepositModal';\r\nimport WithdrawModal from './WithdrawModal';\r\nimport ZapModal from './ZapModal';\r\nimport TokenSymbol from '../../../components/TokenSymbol';\r\nimport { Bank } from '../../../tomb-finance';\r\n\r\ninterface StakeProps {\r\n  bank: Bank;\r\n}\r\n\r\nconst Stake: React.FC<StakeProps> = ({ bank }) => {\r\n  const [approveStatus, approve] = useApprove(bank.depositToken, bank.address);\r\n\r\n  const { color: themeColor } = useContext(ThemeContext);\r\n  const tokenBalance = useTokenBalance(bank.depositToken);\r\n  const stakedBalance = useStakedBalance(bank.contract, bank.poolId);\r\n  const stakedTokenPriceInDollars = useStakedTokenPriceInDollars(bank.depositTokenName, bank.depositToken);\r\n  const tokenPriceInDollars = useMemo(\r\n    () => (stakedTokenPriceInDollars ? stakedTokenPriceInDollars : null),\r\n    [stakedTokenPriceInDollars],\r\n  );\r\n  const earnedInDollars = (\r\n    Number(tokenPriceInDollars) * Number(getDisplayBalance(stakedBalance, bank.depositToken.decimal))\r\n  ).toFixed(2);\r\n  const { onStake } = useStake(bank);\r\n  const { onZap } = useZap(bank);\r\n  const { onWithdraw } = useWithdraw(bank);\r\n\r\n  const [onPresentDeposit, onDismissDeposit] = useModal(\r\n    <DepositModal\r\n      max={tokenBalance}\r\n      decimals={bank.depositToken.decimal}\r\n      onConfirm={(amount) => {\r\n        if (Number(amount) <= 0 || isNaN(Number(amount))) return;\r\n        onStake(amount);\r\n        onDismissDeposit();\r\n      }}\r\n      tokenName={bank.depositTokenName}\r\n    />,\r\n  );\r\n\r\n  const [onPresentZap, onDissmissZap] = useModal(\r\n    <ZapModal\r\n      decimals={bank.depositToken.decimal}\r\n      onConfirm={(zappingToken, tokenName, amount) => {\r\n        if (Number(amount) <= 0 || isNaN(Number(amount))) return;\r\n        onZap(zappingToken, tokenName, amount);\r\n        onDissmissZap();\r\n      }}\r\n      tokenName={bank.depositTokenName}\r\n    />,\r\n  );\r\n\r\n  const [onPresentWithdraw, onDismissWithdraw] = useModal(\r\n    <WithdrawModal\r\n      max={stakedBalance}\r\n      decimals={bank.depositToken.decimal}\r\n      onConfirm={(amount) => {\r\n        if (Number(amount) <= 0 || isNaN(Number(amount))) return;\r\n        onWithdraw(amount);\r\n        onDismissWithdraw();\r\n      }}\r\n      tokenName={bank.depositTokenName}\r\n    />,\r\n  );\r\n\r\n  return (\r\n    <Card style={{ boxShadow: 'none !important'}}>\r\n      <CardContent>\r\n        <StyledCardContentInner>\r\n          <StyledCardHeader>\r\n            <CardIcon>\r\n              <TokenSymbol symbol={bank.depositToken.symbol} size={54} />\r\n            </CardIcon>\r\n            <Value value={getDisplayBalance(stakedBalance, bank.depositToken.decimal)} />\r\n            <Label text={` $${earnedInDollars}`} color=\"#89cff0\" />\r\n            <Label text={`${bank.depositTokenName} Staked`} />\r\n          </StyledCardHeader>\r\n          <StyledCardActions>\r\n            {approveStatus !== ApprovalState.APPROVED ? (\r\n              <Button\r\n                disabled={\r\n                  bank.closedForStaking ||\r\n                  approveStatus === ApprovalState.PENDING ||\r\n                  approveStatus === ApprovalState.UNKNOWN\r\n                }\r\n                onClick={approve}\r\n                color=\"primary\"\r\n                variant=\"contained\"\r\n                style={{ marginTop: '20px' }}\r\n              >\r\n                {`Approve ${bank.depositTokenName}`}\r\n              </Button>\r\n            ) : (\r\n              <>\r\n                <IconButton onClick={onPresentWithdraw}>\r\n                  <RemoveIcon />\r\n                </IconButton>\r\n                <StyledActionSpacer />\r\n                 <IconButton\r\n                  disabled={bank.closedForStaking || bank.depositTokenName === 'GAME-DAI-LP'}\r\n                  onClick={() => (bank.closedForStaking ? null : onPresentZap())}\r\n                >\r\n                  <FlashOnIcon style={{ color: themeColor.grey[400] }} />\r\n                </IconButton>\r\n                <StyledActionSpacer />\r\n                <IconButton\r\n                  disabled={bank.closedForStaking}\r\n                  onClick={() => (bank.closedForStaking ? null : onPresentDeposit())}\r\n                >\r\n                  <AddIcon />\r\n                </IconButton>\r\n              </>\r\n            )}\r\n          </StyledCardActions>\r\n        </StyledCardContentInner>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n\r\nconst StyledCardHeader = styled.div`\r\n  align-items: center;\r\n  display: flex;\r\n  flex-direction: column;\r\n`;\r\nconst StyledCardActions = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  margin-top: 28px;\r\n  width: 100%;\r\n`;\r\n\r\nconst StyledActionSpacer = styled.div`\r\n  height: ${(props) => props.theme.spacing[4]}px;\r\n  width: ${(props) => props.theme.spacing[4]}px;\r\n`;\r\n\r\nconst StyledCardContentInner = styled.div`\r\n  align-items: center;\r\n  display: flex;\r\n  flex: 1;\r\n  flex-direction: column;\r\n  justify-content: space-between;\r\n`;\r\n\r\nexport default Stake;\r\n","import { useContext } from 'react';\r\nimport { Context as BanksContext } from '../contexts/Banks';\r\nimport { Bank, ContractName } from '../tomb-finance';\r\n\r\nconst useBank = (contractName: ContractName): Bank => {\r\n  const { banks } = useContext(BanksContext);\r\n  return banks.find((bank) => bank.page === contractName);\r\n};\r\n\r\nexport default useBank;\r\n","import { useCallback, useState, useEffect } from 'react';\r\nimport useTombFinance from './useTombFinance';\r\nimport { Bank } from '../tomb-finance';\r\nimport { PoolStats } from '../tomb-finance/types';\r\nimport config from '../config';\r\n\r\nconst useStatsForPool = (bank: Bank) => {\r\n  const tombFinance = useTombFinance();\r\n\r\n  const [poolAPRs, setPoolAPRs] = useState<PoolStats>();\r\n\r\n  const fetchAPRsForPool = useCallback(async () => {\r\n    setPoolAPRs(await tombFinance.getPoolAPRs(bank));\r\n  }, [tombFinance, bank]);\r\n\r\n  useEffect(() => {\r\n    fetchAPRsForPool().catch((err) => console.error(`Failed to fetch APRs for pool: ${err.stack}`));\r\n    const refreshInterval = setInterval(fetchAPRsForPool, config.refreshInterval);\r\n    return () => clearInterval(refreshInterval);\r\n  }, [setPoolAPRs, tombFinance, fetchAPRsForPool]);\r\n\r\n  return poolAPRs;\r\n};\r\n\r\nexport default useStatsForPool;\r\n","import { useCallback } from 'react';\r\nimport useTombFinance from './useTombFinance';\r\nimport { Bank } from '../tomb-finance';\r\nimport useHandleTransactionReceipt from './useHandleTransactionReceipt';\r\n\r\nconst useRedeem = (bank: Bank) => {\r\n  const tombFinance = useTombFinance();\r\n  const handleTransactionReceipt = useHandleTransactionReceipt();\r\n\r\n  const handleRedeem = useCallback(() => {\r\n    handleTransactionReceipt(tombFinance.exit(bank.contract, bank.poolId), `Redeem ${bank.contract}`);\r\n  }, [bank, tombFinance, handleTransactionReceipt]);\r\n\r\n  return { onRedeem: handleRedeem };\r\n};\r\n\r\nexport default useRedeem;\r\n","import React, { useEffect } from 'react';\r\nimport styled from 'styled-components';\r\n\r\nimport { useParams } from 'react-router-dom';\r\nimport { useWallet } from 'use-wallet';\r\nimport { makeStyles } from '@mui/styles';\r\n\r\nimport { Box, Button, Card, CardContent, Typography, Grid } from '@mui/material';\r\n\r\nimport PageHeader from '../../components/PageHeader';\r\nimport Spacer from '../../components/Spacer';\r\nimport UnlockWallet from '../../components/UnlockWallet';\r\nimport Harvest from './components/Harvest';\r\nimport Stake from './components/Stake';\r\nimport useBank from '../../hooks/useBank';\r\nimport useStatsForPool from '../../hooks/useStatsForPool';\r\nimport useRedeem from '../../hooks/useRedeem';\r\nimport { Bank as BankEntity } from '../../tomb-finance';\r\nimport useTombFinance from '../../hooks/useTombFinance';\r\nimport { Alert } from '@mui/lab';\r\nconst useStyles = makeStyles((theme : any) => ({\r\n  gridItem: {\r\n    height: '100%',\r\n    [theme.breakpoints.up('md')]: {\r\n      height: '90px',\r\n    },\r\n  },\r\n}));\r\n\r\n//TODO: Get deposit fee from contract?\r\nconst Bank: React.FC = () => {\r\n  useEffect(() => window.scrollTo(0, 0));\r\n  const classes = useStyles();\r\n  const { bankId } = useParams();\r\n  const bank = useBank(bankId);\r\n\r\n  const { account } = useWallet();\r\n  const { onRedeem } = useRedeem(bank);\r\n  const statsOnPool = useStatsForPool(bank);\r\n  return account && bank ? (\r\n    <>\r\n      <PageHeader\r\n        icon=\"\"\r\n        subtitle={`Deposit ${bank?.depositTokenName} and earn ${bank?.earnTokenName} and L${bank?.earnTokenName}`}\r\n        title={bank?.name}\r\n      />\r\n      <Alert variant=\"filled\" severity=\"warning\" style={{ marginBottom: '50px' }}>\r\n        {bank.earnTokenName == \"GAME\" ? \"There is a 1% deposit fee for genesis pools to kickstart the theory and grow the treasury.\" : \"The withdraw fee changes the longer you are in the farm. The fees are as follows: 1 block = 25%, less than 1 hour = 8%, less than 1 day = 4%, less than 3 days = 2%, less than 5 days = 1%, less than 2 weeks = 0.5%, less than 4 weeks = 0.25%, equal to or more than 4 weeks = 0.01%. Depositing or claiming does not reset your withdraw fee.\"}\r\n      </Alert>\r\n      <Alert variant=\"filled\" severity=\"warning\" style={{ marginBottom: '50px' }}>\r\n        {bank.earnTokenName == \"GAME\" ? \"Due to the price fluctuations of low liquidity, APRs should be only thought of as relative to other pools in the protocol and not as monetary gain. Rewards are not locked for genesis pools so you can immediately start using your GAME.\" : \"Withdrawing or depositing any amount also claims your rewards. The amount of rewards created and locked decreases every week. You can find your locked LTHEORY rewards using the My Wallet button. View the docs for more info.\"}\r\n      </Alert>\r\n      <Box>\r\n        <Grid container justifyContent=\"center\" rowSpacing={13} columnSpacing={3} style={{ marginBottom: '50px' }}>\r\n          <Grid item xs={12} md={2} lg={2} className={classes.gridItem}>\r\n            <Card className={classes.gridItem}>\r\n              <CardContent style={{ textAlign: 'center', boxShadow: 'none !important' }}>\r\n                <Typography>Total APR</Typography>\r\n                <Typography>{bank.closedForStaking ? '0.00' : statsOnPool?.yearlyAPR}%</Typography>\r\n              </CardContent>\r\n            </Card>\r\n          </Grid>\r\n          <Grid item xs={12} md={2} lg={2} className={classes.gridItem}>\r\n            <Card className={classes.gridItem}>\r\n              <CardContent style={{ textAlign: 'center' }}>\r\n                <Typography>{bank.earnTokenName} APR</Typography>\r\n                <Typography>{bank.closedForStaking ? '0.00' : (Number(statsOnPool?.yearlyAPR)*(100.0-Number(statsOnPool?.locked))/100.0).toFixed(2)}%</Typography>\r\n              </CardContent>\r\n            </Card>\r\n          </Grid>\r\n          <Grid item xs={12} md={2} lg={2} className={classes.gridItem}>\r\n            <Card className={classes.gridItem}>\r\n              <CardContent style={{ textAlign: 'center' }}>\r\n                <Typography>L{bank.earnTokenName} APR</Typography>\r\n                <Typography>{bank.closedForStaking ? '0.00' : (Number(statsOnPool?.yearlyAPR)*Number(statsOnPool?.locked)/100.0).toFixed(2)}%</Typography>\r\n              </CardContent>\r\n            </Card>\r\n          </Grid>\r\n          <Grid item xs={12} md={2} lg={2} className={classes.gridItem}>\r\n            <Card className={classes.gridItem}>\r\n              <CardContent style={{ textAlign: 'center' }}>\r\n                <Typography>Total DPR</Typography>\r\n                <Typography>{bank.closedForStaking ? '0.00' : statsOnPool?.dailyAPR}%</Typography>\r\n              </CardContent>\r\n            </Card>\r\n          </Grid>\r\n          <Grid item xs={12} md={2} lg={2} className={classes.gridItem}>\r\n            <Card className={classes.gridItem}>\r\n              <CardContent style={{ textAlign: 'center' }}>\r\n                <Typography>{bank.earnTokenName} DPR</Typography>\r\n                <Typography>{bank.closedForStaking ? '0.00' : (Number(statsOnPool?.dailyAPR)*(100.0-Number(statsOnPool?.locked))/100.0).toFixed(2)}%</Typography>\r\n              </CardContent>\r\n            </Card>\r\n          </Grid>\r\n          <Grid item xs={12} md={2} lg={2} className={classes.gridItem}>\r\n            <Card className={classes.gridItem}>\r\n              <CardContent style={{ textAlign: 'center' }}>\r\n                <Typography>L{bank.earnTokenName} DPR</Typography>\r\n                <Typography>{bank.closedForStaking ? '0.00' : (Number(statsOnPool?.dailyAPR)*Number(statsOnPool?.locked)/100.0).toFixed(2)}%</Typography>\r\n              </CardContent>\r\n            </Card>\r\n          </Grid>\r\n          <Grid item xs={12} md={2} lg={2} className={classes.gridItem}>\r\n            <Card className={classes.gridItem}>\r\n              <CardContent style={{ textAlign: 'center' }}>\r\n                <Typography>TVL</Typography>\r\n                <Typography>${statsOnPool?.TVL}</Typography>\r\n              </CardContent>\r\n            </Card>\r\n          </Grid>\r\n          <Grid item xs={12} md={2} lg={2} className={classes.gridItem}>\r\n            <Card className={classes.gridItem}>\r\n              <CardContent style={{ textAlign: 'center' }}>\r\n                <Typography>{bank.earnTokenName == \"GAME\" ? \"Deposit\" : \"Your Current Withdraw\"} Fee</Typography>\r\n                <Typography>{statsOnPool?.fee}%</Typography>\r\n              </CardContent>\r\n            </Card>\r\n          </Grid>\r\n          <Grid item xs={12} md={2} lg={2} className={classes.gridItem}>\r\n            <Card className={classes.gridItem}>\r\n              <CardContent style={{textAlign: 'center'}}>\r\n                <Typography>L{bank.earnTokenName} Percentage</Typography>\r\n                <Typography>{statsOnPool?.locked}%</Typography>\r\n              </CardContent>\r\n            </Card>\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n      <Box mt={15}>\r\n        <StyledBank>\r\n          <StyledCardsWrapper>\r\n            <StyledCardWrapper>\r\n              <Harvest bank={bank} rewardsLocked={Number(statsOnPool?.locked)} />\r\n            </StyledCardWrapper>\r\n            <Spacer />\r\n            <StyledCardWrapper>{<Stake bank={bank} />}</StyledCardWrapper>\r\n          </StyledCardsWrapper>\r\n          <Spacer size=\"lg\" />\r\n           {bank.depositTokenName.endsWith('LP') && <LPTokenHelpText bank={bank} />}\r\n          <Spacer size=\"lg\" />\r\n          <div>\r\n            <Button onClick={onRedeem} color=\"primary\" variant=\"contained\">\r\n              Claim & Withdraw\r\n            </Button>\r\n          </div>\r\n          <Spacer size=\"lg\" />\r\n        </StyledBank>\r\n      </Box>\r\n    </>\r\n  ) : !bank ? (\r\n    <BankNotFound />\r\n  ) : (\r\n    <UnlockWallet />\r\n  );\r\n};\r\n\r\nconst LPTokenHelpText: React.FC<{ bank: BankEntity }> = ({ bank }) => {\r\n  const tombFinance = useTombFinance();\r\n  const tombAddr = tombFinance.TOMB.address;\r\n  const tshareAddr = tombFinance.TSHARE.address;\r\n\r\n  let pairName: string;\r\n  let uniswapUrl: string;\r\n  if (bank.depositTokenName.includes('GAME')) {\r\n    pairName = 'GAME-DAI pair';\r\n    uniswapUrl = 'https://spookyswap.finance/add/' + tombAddr + \"/0x8D11eC38a3EB5E956B052f67Da8Bdc9bef8Abf3E\";\r\n  } else {\r\n    pairName = 'THEORY-DAI pair';\r\n    uniswapUrl = 'https://spookyswap.finance/add/' + tshareAddr + \"/0x8D11eC38a3EB5E956B052f67Da8Bdc9bef8Abf3E\";\r\n  }\r\n  return (\r\n    <Card>\r\n      <CardContent>\r\n        <StyledLink href={uniswapUrl} target=\"_blank\">\r\n          {`Provide liquidity for ${pairName} now on SpookySwap!`}\r\n        </StyledLink>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n\r\nconst BankNotFound = () => {\r\n  return (\r\n    <Center>\r\n      <PageHeader icon=\"\" title=\"Not Found\" subtitle=\"Please return to the homepage and try again later.\" />\r\n    </Center>\r\n  );\r\n};\r\n\r\nconst StyledBank = styled.div`\r\n  align-items: center;\r\n  display: flex;\r\n  flex-direction: column;\r\n  @media (max-width: 768px) {\r\n    width: 100%;\r\n  }\r\n`;\r\n\r\nconst StyledLink = styled.a`\r\n  font-weight: 700;\r\n  text-decoration: none;\r\n  color: ${(props) => props.theme.color.primary.main};\r\n`;\r\n\r\nconst StyledCardsWrapper = styled.div`\r\n  display: flex;\r\n  width: 600px;\r\n  @media (max-width: 768px) {\r\n    width: 100%;\r\n    flex-flow: column nowrap;\r\n    align-items: center;\r\n  }\r\n`;\r\n\r\nconst StyledCardWrapper = styled.div`\r\n  display: flex;\r\n  flex: 1;\r\n  flex-direction: column;\r\n  @media (max-width: 768px) {\r\n    width: 80%;\r\n  }\r\n`;\r\n\r\nconst Center = styled.div`\r\n  display: flex;\r\n  flex: 1;\r\n  align-items: center;\r\n  justify-content: center;\r\n`;\r\n\r\nexport default Bank;\r\n","import React from 'react';\r\nimport { useWallet } from 'use-wallet';\r\nimport { Route, Switch, useRouteMatch } from 'react-router-dom';\r\nimport CountUp from 'react-countup';\r\nimport Bank from '../Bank';\r\nimport { makeStyles } from '@mui/styles';\r\nimport useTotalTreasuryBalance from '../../hooks/useTotalTreasuryBalance.js'\r\n\r\nimport { Box, Card, CardContent, Typography, Grid, Container } from '@mui/material';\r\n\r\nimport { Alert } from '@mui/lab';\r\n\r\nimport UnlockWallet from '../../components/UnlockWallet';\r\nimport Page from '../../components/Page';\r\nimport CemeteryCard from './CemeteryCard';\r\nimport { createGlobalStyle } from 'styled-components';\r\n\r\nimport useBanks from '../../hooks/useBanks';\r\n\r\nconst assetList = [\r\n  {\r\n    depositTokenName: '2SHARES',\r\n  },\r\n  {\r\n    depositTokenName: '2SHARES-DAI LP',\r\n  },\r\n  {\r\n    depositTokenName: 'GAME-DAI LP',\r\n  },\r\n  {\r\n    depositTokenName: 'THEORY',\r\n  },\r\n  {\r\n    depositTokenName: 'THEORY-DAI LP',\r\n  },\r\n]\r\n\r\n// const BackgroundImage = createGlobalStyle`\r\n//   body {\r\n//     background-color: #ffffff;\r\n//     background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Cg fill-rule='evenodd'%3E%3Cg fill='%239C92AC' fill-opacity='0.12'%3E%3Cpath opacity='.5' d='M96 95h4v1h-4v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9zm-1 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9z'/%3E%3Cpath d='M6 5V0H5v5H0v1h5v94h1V6h94V5H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E\");\r\n//   }\r\n// `;\r\n\r\nconst BackgroundImage = createGlobalStyle`\r\n  body {\r\n    background-color: var(--black);\r\n    background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='32' viewBox='0 0 16 32'%3E%3Cg fill='%231D1E1F' fill-opacity='0.4'%3E%3Cpath fill-rule='evenodd' d='M0 24h4v2H0v-2zm0 4h6v2H0v-2zm0-8h2v2H0v-2zM0 0h4v2H0V0zm0 4h2v2H0V4zm16 20h-6v2h6v-2zm0 4H8v2h8v-2zm0-8h-4v2h4v-2zm0-20h-6v2h6V0zm0 4h-4v2h4V4zm-2 12h2v2h-2v-2zm0-8h2v2h-2V8zM2 8h10v2H2V8zm0 8h10v2H2v-2zm-2-4h14v2H0v-2zm4-8h6v2H4V4zm0 16h6v2H4v-2zM6 0h2v2H6V0zm0 24h2v2H6v-2z'/%3E%3C/g%3E%3C/svg%3E\");\r\n}\r\n\r\n* {\r\n    border-radius: 0 !important;\r\n}\r\n`;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  gridItem: {\r\n    height: '100%',\r\n    [theme.breakpoints.up('md')]: {\r\n      height: '90px',\r\n    },\r\n  },\r\n}));\r\n\r\nconst Cemetery = () => {\r\n  const classes = useStyles();\r\n  const [banks] = useBanks();\r\n  const { path } = useRouteMatch();\r\n  const { account } = useWallet();\r\n  const activeBanks = banks.filter((bank) => !bank.finished);\r\n  const { balance, balance_2shares_dai, balance_game_dai, balancetheory_dai, balance_game, balancetheory, balance_2shares } = useTotalTreasuryBalance();\r\n  return (\r\n    <Switch>\r\n      <Page>\r\n        <Route exact path={path}>\r\n          <BackgroundImage />\r\n          {!!account ? (\r\n            <Container maxWidth=\"lg\">\r\n              <Typography color=\"textPrimary\" align=\"center\" variant=\"h3\" gutterBottom style={{ marginBottom: '50px' }}>\r\n                Treasury\r\n              </Typography>\r\n\r\n              {/* <Box mt={5}>\r\n                <div hidden={activeBanks.filter((bank) => bank.sectionInUI === 0).length === 0}>\r\n                  <Typography color=\"textPrimary\" variant=\"h4\" gutterBottom style={{ marginTop: '20px' }}>\r\n                    Genesis Pools\r\n                  </Typography>\r\n                  <Grid container spacing={3}>\r\n                    {activeBanks\r\n                      .filter((bank) => bank.sectionInUI === 0)\r\n                      .map((bank) => (\r\n                        <React.Fragment key={bank.name}>\r\n                          <CemeteryCard bank={bank} />\r\n                        </React.Fragment>\r\n                      ))}\r\n                  </Grid>\r\n                </div>\r\n              </Box> */}\r\n              \r\n              <Box mt={2}>\r\n                <Grid container justifyContent=\"center\" spacing={3}>\r\n                  <Grid item xs={12} md={4} lg={4} className={classes.gridItem}>\r\n                    <Card style={{ height: \"auto\" }}>\r\n                      <CardContent align=\"center\">\r\n                        <Typography variant=\"h5\">\r\n                          Total Treasury Balance:\r\n                        </Typography>\r\n                        <CountUp style={{ fontSize: '25px' }} end={balance} separator=\",\" prefix=\"$\" />\r\n                      </CardContent>\r\n                    </Card>\r\n                  </Grid>\r\n                </Grid>\r\n              </Box>\r\n\r\n              <Box mt={2} style={{ marginTop: '100px' }}>\r\n              <Typography color=\"textPrimary\" align=\"center\" variant=\"h4\" gutterBottom style={{ marginBottom: '50px' }}>\r\n                Protocol Owned Liquidity\r\n              </Typography>\r\n                <Grid container justifyContent=\"center\" spacing={3}>\r\n                  <Grid item xs={12} md={4} lg={4} className={classes.gridItem}>\r\n                    <Card style={{ height: \"auto\" }}>\r\n                      <CardContent align=\"center\">\r\n                        <Typography variant=\"h5\">\r\n                          GAME-DAI LP:\r\n                        </Typography>\r\n                        <CountUp style={{ fontSize: '25px' }} end={balance_game_dai} separator=\",\" prefix=\"$\" />\r\n                      </CardContent>\r\n                      <CardContent align=\"center\">\r\n                        <Typography variant=\"h5\">\r\n                          THEORY-DAI LP:\r\n                        </Typography>\r\n                        <CountUp style={{ fontSize: '25px' }} end={balancetheory_dai} separator=\",\" prefix=\"$\" />\r\n                      </CardContent>\r\n                      <CardContent align=\"center\">\r\n                        <Typography variant=\"h5\">\r\n                          2SHARES-DAI LP:\r\n                        </Typography>\r\n                        <CountUp style={{ fontSize: '25px' }} end={balance_2shares_dai} separator=\",\" prefix=\"$\" />\r\n                      </CardContent>\r\n                    </Card>\r\n                  </Grid>\r\n                  <Grid item xs={12} md={4} lg={4} className={classes.gridItem}>\r\n                    <Card style={{ height: \"auto\" }}>\r\n                      <CardContent align=\"center\">\r\n                        <Typography variant=\"h5\">\r\n                          GAME:\r\n                        </Typography>\r\n                        <CountUp style={{ fontSize: '25px' }} end={balance_game} separator=\",\" prefix=\"$\" />\r\n                      </CardContent>\r\n                      <CardContent align=\"center\">\r\n                        <Typography variant=\"h5\">\r\n                          THEORY:\r\n                        </Typography>\r\n                        <CountUp style={{ fontSize: '25px' }} end={balancetheory} separator=\",\" prefix=\"$\" />\r\n                      </CardContent>\r\n                      <CardContent align=\"center\">\r\n                        <Typography variant=\"h5\">\r\n                          2SHARES:\r\n                        </Typography>\r\n                        <CountUp style={{ fontSize: '25px' }} end={balance_2shares} separator=\",\" prefix=\"$\" />\r\n                      </CardContent>\r\n                    </Card>\r\n                  </Grid>\r\n                </Grid>\r\n              </Box>\r\n\r\n              {/* <Grid container justifyContent=\"center\" spacing={3}>\r\n                {assetList.map((asset) => \r\n                <Card>\r\n                  <CemeteryCard bank={asset} />\r\n                </Card>\r\n                )}\r\n              </Grid> */}\r\n\r\n\r\n\r\n\r\n              \r\n\r\n            </Container>\r\n          ) : (\r\n            <UnlockWallet />\r\n          )}\r\n        </Route>\r\n        <Route path={`${path}/:bankId`}>\r\n          <BackgroundImage />\r\n          <Bank />\r\n        </Route>\r\n      </Page>\r\n    </Switch>\r\n  );\r\n};\r\n\r\nexport default Cemetery;\r\n"],"sourceRoot":""}