(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[14],{1010:function(n,e,t){"use strict";t.d(e,"b",(function(){return s})),t.d(e,"a",(function(){return d}));var c=t(4),r=t(59),a=t(77),i=t(122),o=t(990);function s(){var n=Object(a.b)(),e=n.chainId,t=n.account,o=Object(r.b)();return Object(c.useCallback)((function(n){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=c.summary,a=c.approval;if(t&&e){var s=n.hash;if(!s)throw Error("No transaction hash found.");o(Object(i.a)({hash:s,from:t,chainId:e,approval:a,summary:r}))}}),[o,e,t])}function u(){var n,e=Object(a.b)().chainId,t=Object(r.c)((function(n){return n.transactions}));return e&&null!==(n=t[e])&&void 0!==n?n:{}}function d(n,e){var t=u(),r=Object(o.a)().fastRefresh;return Object(c.useMemo)((function(){return"string"===typeof n&&"string"===typeof e&&Object.keys(t).some((function(c){var r=t[c];if(!r)return!1;if(r.receipt)return!1;var a=r.approval;return!!a&&(a.spender===e&&a.tokenAddress===n&&function(n){return(new Date).getTime()-n.addedTime<864e5}(r))}))}),[t,e,n,r])}},1021:function(n,e,t){"use strict";t.d(e,"a",(function(){return v}));var c,r,a,i,o,s,u=t(51),d=(t(4),t(45)),l=t(1840),b=t(16),j=d.d.div(c||(c=Object(u.a)(["\n  align-items: center;\n  background-color: white;\n  border-radius: ","px;\n  display: flex;\n  padding: 0 ","px;\n"])),(function(n){return n.theme.borderRadius}),(function(n){return n.theme.spacing[3]})),f=d.d.input(r||(r=Object(u.a)(["\n  background: none;\n  border: 0;\n  color: ",";\n  font-size: 18px;\n  flex: 1;\n  height: 56px;\n  margin: 0;\n  padding: 0;\n  outline: none;\n"])),(function(n){return n.theme.color.grey[600]})),h=function(n){var e=n.endAdornment,t=n.onChange,c=n.placeholder,r=n.startAdornment,a=n.value;return Object(b.jsxs)(j,{children:[!!r&&r,Object(b.jsx)(f,{placeholder:c,value:a,onChange:t}),!!e&&e]})},p=d.d.div(a||(a=Object(u.a)([""]))),O=d.d.div(i||(i=Object(u.a)(["\n  width: ","px;\n"])),(function(n){return n.theme.spacing[3]})),x=d.d.div(o||(o=Object(u.a)(["\n  align-items: center;\n  display: flex;\n"]))),m=d.d.div(s||(s=Object(u.a)(["\n  align-items: center;\n  color: ",";\n  display: flex;\n  font-size: 14px;\n  font-weight: 700;\n  height: 44px;\n  justify-content: flex-end;\n"])),(function(n){return n.theme.color.grey[400]})),v=function(n){var e=n.max,t=n.symbol,c=n.onChange,r=n.onSelectMax,a=n.value;return Object(b.jsxs)(p,{children:[Object(b.jsxs)(m,{children:[e.toLocaleString()," ",t," Available"]}),Object(b.jsx)(h,{endAdornment:Object(b.jsxs)(x,{children:[Object(b.jsx)(O,{}),Object(b.jsx)("div",{children:Object(b.jsx)(l.a,{size:"small",color:"primary",variant:"contained",onClick:r,children:"Max"})})]}),onChange:c,placeholder:"0",value:a})]})}},1022:function(n,e,t){"use strict";t.d(e,"a",(function(){return f}));var c,r,a,i=t(51),o=t(4),s=t.n(o),u=t(45),d=t(16),l=u.d.div(c||(c=Object(i.a)(["\n  align-items: center;\n  background-color: ","00;\n  display: flex;\n  height: 96px;\n  margin: ","px ","px\n    ","px;\n  padding: 0 ","px;\n"])),(function(n){return n.theme.color.grey[100]}),(function(n){return n.theme.spacing[4]}),(function(n){return-n.theme.spacing[4]}),(function(n){return-n.theme.spacing[4]}),(function(n){return n.theme.spacing[4]})),b=u.d.div(r||(r=Object(i.a)(["\n  flex: 1;\n"]))),j=u.d.div(a||(a=Object(i.a)(["\n  width: ","px;\n"])),(function(n){return n.theme.spacing[4]})),f=function(n){var e=n.children,t=s.a.Children.toArray(e).length;return Object(d.jsx)(l,{children:s.a.Children.map(e,(function(n,e){return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(b,{children:n}),e<t-1&&Object(d.jsx)(j,{})]})}))})}},1029:function(n,e,t){"use strict";var c=t(20),r=t(37),a=t(0),i=t.n(a),o=t(4),s=t(77),u=t(990);e.a=function(n,e,t){var a=Object(o.useState)(null),d=Object(r.a)(a,2),l=d[0],b=d[1],j=Object(s.b)().account,f=Object(u.a)().fastRefresh,h=Object(o.useCallback)(Object(c.a)(i.a.mark((function t(){var c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.allowance(j,e);case 2:c=t.sent,b(c);case 4:case"end":return t.stop()}}),t)}))),[j,e,n]);return Object(o.useEffect)((function(){j&&e&&n&&h().catch((function(n){return console.error("Failed to fetch allowance: ".concat(n.stack))}))}),[j,e,n,t,h,f]),l}},1048:function(n,e,t){"use strict";t.d(e,"a",(function(){return i}));t(4);var c=t(1849),r=t(1126),a=t(16),i=function(){return Object(a.jsx)(c.a,{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:Object(a.jsx)(r.a,{})})}},1074:function(n,e,t){"use strict";t.d(e,"a",(function(){return c}));var c,r=t(20),a=t(0),i=t.n(a),o=t(116),s=t(33),u=t(4),d=t(1010),l=t(1029),b=t(990),j=o.a.constants.MaxUint256,f=s.a.from("1000000000000000000000000");!function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.NOT_APPROVED=1]="NOT_APPROVED",n[n.PENDING=2]="PENDING",n[n.APPROVED=3]="APPROVED"}(c||(c={})),e.b=function(n,e){var t=Object(d.a)(n.address,e),a=Object(l.a)(n,e,t),o=Object(b.a)().fastRefresh,s=Object(u.useMemo)((function(){return a?a.lt(f)?t?c.PENDING:c.NOT_APPROVED:c.APPROVED:c.UNKNOWN}),[a,t]),h=Object(d.b)(),p=Object(u.useCallback)(Object(r.a)(i.a.mark((function t(){var r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s===c.NOT_APPROVED){t.next=3;break}return console.error("approve was called unnecessarily"),t.abrupt("return");case 3:return t.next=5,n.approve(e,j);case 5:r=t.sent,h(r,{summary:"Approve ".concat(n.symbol),approval:{tokenAddress:n.address,spender:e}});case 7:case"end":return t.stop()}}),t)}))),[s,o,n,e,h]);return[s,p]}},1095:function(n,e,t){"use strict";t.d(e,"a",(function(){return u}));var c,r=t(51),a=t(4),i=t(45),o=t(16),s=i.d.div(c||(c=Object(r.a)(["\n  height: ","px;\n  width: ","px;\n"])),(function(n){return n.size}),(function(n){return n.size})),u=function(n){var e,t=n.size,c=void 0===t?"md":t,r=Object(a.useContext)(i.a).spacing;switch(c){case"lg":e=r[6];break;case"sm":e=r[2];break;default:e=r[4]}return Object(o.jsx)(s,{size:e})}},1134:function(n,e,t){"use strict";var c=t(20),r=t(37),a=t(0),i=t.n(a),o=t(4),s=t(318),u=t(990);e.a=function(){var n=Object(o.useState)(),e=Object(r.a)(n,2),t=e[0],a=e[1],d=Object(u.a)().slowRefresh,l=Object(s.a)();return Object(o.useEffect)((function(){function n(){return(n=Object(c.a)(i.a.mark((function n(){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.t0=a,n.next=4,l.getBondStat();case 4:n.t1=n.sent,(0,n.t0)(n.t1),n.next=11;break;case 8:n.prev=8,n.t2=n.catch(0),console.error(n.t2);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})))).apply(this,arguments)}!function(){n.apply(this,arguments)}()}),[a,l,d]),t}},1219:function(n,e,t){"use strict";t.d(e,"a",(function(){return b}));var c,r,a,i=t(51),o=(t(4),t(45)),s=t(16),u=o.d.div(c||(c=Object(i.a)(["\n  align-items: center;\n  display: flex;\n  flex-direction: column;\n  padding-bottom: ","px;\n  padding-top: ","px;\n  max-width: 610px;\n  width: 100%;\n  margin: 0 auto;\n  text-align: center;\n"])),(function(n){return n.theme.spacing[6]}),(function(n){return n.theme.spacing[6]})),d=o.d.h1(r||(r=Object(i.a)(["\n  color: ",";\n  font-size: 36px;\n  font-weight: 700;\n  margin: 0;\n  padding: 0;\n"])),(function(n){return n.theme.color.grey[100]})),l=o.d.h3(a||(a=Object(i.a)(["\n  color: ",";\n  font-size: 18px;\n  font-weight: 400;\n  margin: 0;\n  padding: 0;\n  text-align: center;\n"])),(function(n){return n.theme.color.grey[400]})),b=function(n){n.icon;var e=n.subtitle,t=n.title;return Object(s.jsxs)(u,{children:[Object(s.jsx)(d,{children:t}),Object(s.jsx)(l,{children:e})]})}},1833:function(n,e,t){"use strict";t.r(e),t.d(e,"default",(function(){return En}));var c=t(20),r=t(51),a=t(0),i=t.n(a),o=t(4),s=t(1066),u=t(45),d=t(49),l=t(77),b=t(1048),j=t(1219),f=t(37),h=t(1221),p=t(1840),O=t(1357),x=t(318),m=t(1028),v=t(1020),g=t(1372),k=t(1374),y=t(1070),w=t(1358),N=t(1046),z=t(1022),E=t(1049),T=t(1021),C=t(35),D=t(16),A=function(n){var e=n.max,t=n.title,c=n.description,r=n.onConfirm,a=n.onDismiss,i=n.action,s=n.tokenName,u=Object(o.useState)(""),d=Object(f.a)(u,2),l=d[0],b=d[1],j=Object(o.useMemo)((function(){return Object(C.b)(e)}),[e]),h=Object(o.useCallback)((function(n){return b(n.currentTarget.value)}),[b]),p=Object(o.useCallback)((function(){b(j)}),[j,b]);return Object(D.jsxs)(N.a,{children:[Object(D.jsx)(E.a,{text:t}),Object(D.jsx)(T.a,{value:l,onSelectMax:p,onChange:h,max:j,symbol:s}),Object(D.jsx)(m.a,{text:c}),Object(D.jsxs)(z.a,{children:[Object(D.jsx)(w.a,{text:"Cancel",variant:"secondary",onClick:a}),Object(D.jsx)(w.a,{text:i,onClick:function(){return r(l)}})]})]})},P=t(1052),M=t(1074),H=t(141),R="Unexpected error is occurred.";var B,V,I,F,G,S,U,L,W,K,_,J,q,Q,X,Y=function(){var n=Object(H.b)();return Object(o.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:R;e.catch((function(e){e.message.includes("User denied")||(console.error("Uncaught exception: ".concat(e.stack)),n({error:{message:t,stack:e.stack}}))}))}),[n])},Z=u.d.div(B||(B=Object(r.a)(["\n  align-items: center;\n  display: flex;\n  font-size: 20px;\n  font-weight: 700;\n  height: 64px;\n  justify-content: center;\n  margin-top: ","px;\n"])),(function(n){return-n.theme.spacing[3]})),$=u.d.div(V||(V=Object(r.a)(["\n  background-color: ",";\n  width: 72px;\n  height: 72px;\n  border-radius: 36px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-bottom: ","px;\n"])),(function(n){return n.theme.color.grey[900]}),(function(n){return n.theme.spacing[2]})),nn=u.d.div(I||(I=Object(r.a)(["\n  align-items: center;\n  display: flex;\n  margin-bottom: ","px;\n"])),(function(n){return n.theme.spacing[5]})),en=u.d.div(F||(F=Object(r.a)(["\n  font-size: 20px;\n  padding-left: ","px;\n  padding-right: ","px;\n  padding-bottom: ","px;\n"])),(function(n){return n.theme.spacing[3]}),(function(n){return n.theme.spacing[3]}),(function(n){return n.theme.spacing[4]})),tn=u.d.div(G||(G=Object(r.a)(["\n  align-items: center;\n  display: flex;\n  flex-direction: column;\n  font-weight: 600;\n"]))),cn=u.d.div(S||(S=Object(r.a)(["\n  display: flex;\n  justify-content: center;\n  margin-top: ","px;\n  width: 100%;\n"])),(function(n){return n.theme.spacing[3]})),rn=u.d.span(U||(U=Object(r.a)([""]))),an=u.d.div(L||(L=Object(r.a)(["\n  align-items: center;\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  justify-content: space-between;\n"]))),on=function(n){var e=n.action,t=n.fromToken,c=n.fromTokenName,r=n.toToken,a=n.toTokenName,i=n.priceDesc,o=n.onExchange,s=n.disabled,u=void 0!==s&&s,d=n.disabledDescription,l=Y(),b=Object(x.a)().contracts.Treasury,j=Object(M.b)(t,b.address),w=Object(f.a)(j,2),N=w[0],z=w[1],E=Object(P.a)(t),T=Object(y.a)(Object(D.jsx)(A,{title:e,description:i,max:E,onConfirm:function(n){o(n),R()},action:e,tokenName:c})),C=Object(f.a)(T,2),H=C[0],R=C[1];return Object(D.jsx)(h.a,{children:Object(D.jsx)(O.a,{children:Object(D.jsxs)(an,{children:[Object(D.jsx)(Z,{children:"".concat(e," ").concat(a)}),Object(D.jsxs)(nn,{children:[Object(D.jsxs)(tn,{children:[Object(D.jsx)($,{style:{background:"transparent"},children:Object(D.jsx)(v.a,{symbol:t.symbol,size:54})}),Object(D.jsx)(m.a,{text:c,variant:"normal"})]}),Object(D.jsx)(en,{children:Object(D.jsx)(g.FontAwesomeIcon,{icon:k.faArrowRight})}),Object(D.jsxs)(tn,{children:[Object(D.jsx)($,{style:{background:"transparent"},children:Object(D.jsx)(v.a,{symbol:r.symbol,size:54})}),Object(D.jsx)(m.a,{text:a,variant:"normal"})]})]}),Object(D.jsx)(rn,{children:i}),Object(D.jsx)(cn,{children:N===M.a.APPROVED||u?Object(D.jsx)(p.a,{color:"primary",variant:"contained",onClick:H,disabled:u,children:d||e}):Object(D.jsx)(p.a,{color:"primary",variant:"contained",disabled:N===M.a.PENDING||N===M.a.UNKNOWN,onClick:function(){return l(z(),"Unable to approve ".concat(c))},children:"Approve ".concat(c)})})]})})})},sn=t(1095),un=t(1134),dn=t(46),ln=t(33),bn=function(){var n=Object(o.useState)(ln.a.from(0)),e=Object(f.a)(n,2),t=e[0],r=e[1],a=Object(x.a)(),s=Object(o.useCallback)(Object(c.a)(i.a.mark((function n(){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=r,n.next=3,a.getTombPriceInLastTWAP();case 3:n.t1=n.sent,(0,n.t0)(n.t1);case 5:case"end":return n.stop()}}),n)}))),[a]);return Object(o.useEffect)((function(){s().catch((function(n){return console.error("Failed to fetch TOMB price: ".concat(n.stack))}));var n=setInterval(s,dn.b.refreshInterval);return function(){return clearInterval(n)}}),[r,a,s]),t},jn=t(1010),fn=u.d.div(W||(W=Object(r.a)(["\n  font-size: 20px;\n  font-weight: 700;\n  margin-bottom: ","px;\n"])),(function(n){return n.theme.spacing[2]})),hn=u.d.span(K||(K=Object(r.a)(["\n  //color: ",";\n  text-align: center;\n"])),(function(n){return n.theme.color.grey[300]})),pn=u.d.div(_||(_=Object(r.a)(["\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n  padding: ","px;\n"])),(function(n){return n.theme.spacing[2]})),On=function(n){var e=n.tokenName,t=n.description,c=n.price;return Object(D.jsx)(h.a,{children:Object(D.jsxs)(pn,{children:[Object(D.jsx)(fn,{children:"\ud83d\udcb0 ".concat(e," = ").concat(c," DAI")}),Object(D.jsx)(hn,{children:t})]})})},xn=function(){var n=Object(o.useState)(ln.a.from(0)),e=Object(f.a)(n,2),t=e[0],r=e[1],a=Object(x.a)();return Object(o.useEffect)((function(){function n(){return(n=Object(c.a)(i.a.mark((function n(){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.t0=r,n.next=4,a.getBondsPurchasable();case 4:n.t1=n.sent,(0,n.t0)(n.t1),n.next=11;break;case 8:n.prev=8,n.t2=n.catch(0),console.error(n.t2);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})))).apply(this,arguments)}!function(){n.apply(this,arguments)}()}),[r,a]),t},mn=ln.a.from(10).pow(18),vn=mn.mul(101).div(100),gn=t(983),kn=t(990),yn=Object(u.c)(J||(J=Object(r.a)(["\n  body {\n    background-color: var(--black);\n    background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='32' viewBox='0 0 16 32'%3E%3Cg fill='%231D1E1F' fill-opacity='0.4'%3E%3Cpath fill-rule='evenodd' d='M0 24h4v2H0v-2zm0 4h6v2H0v-2zm0-8h2v2H0v-2zM0 0h4v2H0V0zm0 4h2v2H0V4zm16 20h-6v2h6v-2zm0 4H8v2h8v-2zm0-8h-4v2h4v-2zm0-20h-6v2h6V0zm0 4h-4v2h4V4zm-2 12h2v2h-2v-2zm0-8h2v2h-2V8zM2 8h10v2H2V8zm0 8h10v2H2v-2zm-2-4h14v2H0v-2zm4-8h6v2H4V4zm0 16h6v2H4v-2zM6 0h2v2H6V0zm0 24h2v2H6v-2z'/%3E%3C/g%3E%3C/svg%3E\");\n}\n\n* {\n    background: transparent;\n    border-radius: 0 !important;\n    box-shadow: none !important;\n}\n"]))),wn=u.d.div(q||(q=Object(r.a)(["\n  display: flex;\n  background: transparent;\n  @media (max-width: 768px) {\n    width: 100%;\n    flex-flow: column nowrap;\n    align-items: center;\n  }\n"]))),Nn=u.d.div(Q||(Q=Object(r.a)(["\n  display: flex;\n  flex: 1;\n  background: transparent;\n  flex-direction: column;\n  @media (max-width: 768px) {\n    width: 80%;\n  }\n"]))),zn=u.d.div(X||(X=Object(r.a)(["\n  display: flex;\n  flex: 0.8;\n  margin: 0 20px;\n  background: transparent;\n  flex-direction: column;\n\n  @media (max-width: 768px) {\n    width: 80%;\n    margin: 16px 0;\n  }\n"]))),En=function(){var n=Object(d.g)().path,e=Object(l.b)().account,t=Object(x.a)(),r=Object(jn.b)(),a=Object(un.a)(),u=bn(),f=xn(),h=Object(kn.a)().slowRefresh,p=Object(P.a)(null===t||void 0===t?void 0:t.TBOND),O=Object(o.useCallback)(function(){var n=Object(c.a)(i.a.mark((function n(e){var c;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.buyBonds(e);case 2:c=n.sent,r(c,{summary:"Buy ".concat(Number(e).toFixed(2)," TBOND with ").concat(e," TOMB")});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[t,r]),m=Object(o.useCallback)(function(){var n=Object(c.a)(i.a.mark((function n(e){var c;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.redeemBonds(e);case 2:c=n.sent,r(c,{summary:"Redeem ".concat(e," TBOND")});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[t,r]),v=Object(o.useMemo)((function(){return u.gt(vn)}),[u,h]),g=Object(o.useMemo)((function(){return Number(null===a||void 0===a?void 0:a.tokenInFtm)<1.01}),[a,h]);return Object(D.jsx)(d.c,{children:Object(D.jsxs)(s.a,{children:[Object(D.jsx)(yn,{}),e?Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(gn.a,{color:"textPrimary",align:"center",variant:"h3",gutterBottom:!0,children:"Bonds"}),Object(D.jsx)(d.a,{exact:!0,path:n,children:Object(D.jsx)(j.a,{icon:"\ud83c\udfe6",subtitle:"Earn premiums upon redemption"})}),Object(D.jsxs)(wn,{children:[Object(D.jsx)(Nn,{children:Object(D.jsx)(on,{action:"Purchase",fromToken:t.TOMB,fromTokenName:"GAME",toToken:t.TBOND,toTokenName:"HODL",priceDesc:g?Object(C.a)(f,18,4)+" HODL available for purchase":"GAME is over peg",onExchange:O,disabled:!a||v})}),Object(D.jsxs)(zn,{children:[Object(D.jsx)(On,{tokenName:"GAME",description:"Last-Hour TWAP Price",price:Object(C.a)(u,18,4)}),Object(D.jsx)(sn.a,{size:"md"}),Object(D.jsx)(On,{tokenName:"HODL",description:"Current Price: (GAME)^2",price:Number(null===a||void 0===a?void 0:a.tokenInFtm).toFixed(2)||"-"})]}),Object(D.jsx)(Nn,{children:Object(D.jsx)(on,{action:"Redeem",fromToken:t.TBOND,fromTokenName:"HODL",toToken:t.TOMB,toTokenName:"GAME",priceDesc:"".concat(Object(C.a)(p)," HODL Available in wallet"),onExchange:m,disabled:!a||p.eq(0)||!v,disabledDescription:v?null:"Enabled when GAME > ".concat(1.01," FTM")})})]})]}):Object(D.jsx)(b.a,{})]})})}},990:function(n,e,t){"use strict";var c=t(4),r=t(327);e.a=function(){var n=Object(c.useContext)(r.a);return{fastRefresh:n.fast,slowRefresh:n.slow}}}}]);
//# sourceMappingURL=14.1fe57cf5.chunk.js.map