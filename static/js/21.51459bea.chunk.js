(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[21],{1133:function(e,n,t){"use strict";var c=t(20),a=t(37),r=t(0),i=t.n(r),o=t(4),s=t(318),u=t(990);n.a=function(){var e=Object(o.useState)(),n=Object(a.a)(e,2),t=n[0],r=n[1],d=Object(u.a)().slowRefresh,l=Object(s.a)();return Object(o.useEffect)((function(){function e(){return(e=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=r,e.next=4,l.getBondStat();case 4:e.t1=e.sent,(0,e.t0)(e.t1),e.next=11;break;case 8:e.prev=8,e.t2=e.catch(0),console.error(e.t2);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[r,l,d]),t}},1219:function(e,n,t){"use strict";t.d(n,"a",(function(){return b}));var c,a,r,i=t(51),o=(t(4),t(45)),s=t(16),u=o.d.div(c||(c=Object(i.a)(["\n  align-items: center;\n  display: flex;\n  flex-direction: column;\n  padding-bottom: ","px;\n  padding-top: ","px;\n  max-width: 610px;\n  width: 100%;\n  margin: 0 auto;\n  text-align: center;\n"])),(function(e){return e.theme.spacing[6]}),(function(e){return e.theme.spacing[6]})),d=o.d.h1(a||(a=Object(i.a)(["\n  color: ",";\n  font-size: 36px;\n  font-weight: 700;\n  margin: 0;\n  padding: 0;\n"])),(function(e){return e.theme.color.grey[100]})),l=o.d.h3(r||(r=Object(i.a)(["\n  color: ",";\n  font-size: 18px;\n  font-weight: 400;\n  margin: 0;\n  padding: 0;\n  text-align: center;\n"])),(function(e){return e.theme.color.grey[400]})),b=function(e){e.icon;var n=e.subtitle,t=e.title;return Object(s.jsxs)(u,{children:[Object(s.jsx)(d,{children:t}),Object(s.jsx)(l,{children:n})]})}},1834:function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return Ee}));var c=t(20),a=t(51),r=t(0),i=t.n(r),o=t(4),s=t(1064),u=t(45),d=t(49),l=t(77),b=t(1066),j=t(1219),x=t(37),m=t(1221),h=t(1841),p=t(1358),f=t(318),O=t(1027),v=t(1020),g=t(1373),k=t(1375),w=t(1069),y=t(1359),z=t(1045),H=t(1028),E=t(1047),D=t(1026),C=t(35),T=t(16),N=function(e){var n=e.max,t=e.title,c=e.description,a=e.onConfirm,r=e.onDismiss,i=e.action,s=e.tokenName,u=Object(o.useState)(""),d=Object(x.a)(u,2),l=d[0],b=d[1],j=Object(o.useMemo)((function(){return Object(C.b)(n)}),[n]),m=Object(o.useCallback)((function(e){return b(e.currentTarget.value)}),[b]),h=Object(o.useCallback)((function(){b(j)}),[j,b]);return Object(T.jsxs)(z.a,{children:[Object(T.jsx)(E.a,{text:t}),Object(T.jsx)(D.a,{value:l,onSelectMax:h,onChange:m,max:j,symbol:s}),Object(T.jsx)(O.a,{text:c}),Object(T.jsxs)(H.a,{children:[Object(T.jsx)(y.a,{text:"Cancel",variant:"secondary",onClick:r}),Object(T.jsx)(y.a,{text:i,onClick:function(){return a(l)}})]})]})},M=t(1050),A=t(1099),B=t(141),L="Unexpected error is occurred.";var F,P,I,V,G,S,R,U,W,J,q,K,Q,X,Y,Z=function(){var e=Object(B.b)();return Object(o.useCallback)((function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L;n.catch((function(n){n.message.includes("User denied")||(console.error("Uncaught exception: ".concat(n.stack)),e({error:{message:t,stack:n.stack}}))}))}),[e])},$=u.d.div(F||(F=Object(a.a)(["\n  align-items: center;\n  display: flex;\n  font-size: 20px;\n  font-weight: 700;\n  height: 64px;\n  justify-content: center;\n  margin-top: ","px;\n"])),(function(e){return-e.theme.spacing[3]})),_=u.d.div(P||(P=Object(a.a)(["\n  background-color: ",";\n  width: 72px;\n  height: 72px;\n  border-radius: 36px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-bottom: ","px;\n"])),(function(e){return e.theme.color.grey[900]}),(function(e){return e.theme.spacing[2]})),ee=u.d.div(I||(I=Object(a.a)(["\n  align-items: center;\n  display: flex;\n  margin-bottom: ","px;\n"])),(function(e){return e.theme.spacing[5]})),ne=u.d.div(V||(V=Object(a.a)(["\n  font-size: 20px;\n  padding-left: ","px;\n  padding-right: ","px;\n  padding-bottom: ","px;\n"])),(function(e){return e.theme.spacing[3]}),(function(e){return e.theme.spacing[3]}),(function(e){return e.theme.spacing[4]})),te=u.d.div(G||(G=Object(a.a)(["\n  align-items: center;\n  display: flex;\n  flex-direction: column;\n  font-weight: 600;\n"]))),ce=u.d.div(S||(S=Object(a.a)(["\n  display: flex;\n  justify-content: center;\n  margin-top: ","px;\n  width: 100%;\n"])),(function(e){return e.theme.spacing[3]})),ae=u.d.span(R||(R=Object(a.a)([""]))),re=u.d.div(U||(U=Object(a.a)(["\n  align-items: center;\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  justify-content: space-between;\n"]))),ie=function(e){var n=e.action,t=e.fromToken,c=e.fromTokenName,a=e.toToken,r=e.toTokenName,i=e.priceDesc,o=e.onExchange,s=e.disabled,u=void 0!==s&&s,d=e.disabledDescription,l=e.max,b=void 0===l?void 0:l,j=Z(),y=Object(f.a)().contracts.Treasury,z=Object(A.b)(t,y.address),H=Object(x.a)(z,2),E=H[0],D=H[1],C=Object(M.a)(t),B=Object(w.a)(Object(T.jsx)(N,{title:n,description:i,max:void 0==b?C:C>b?b:C,onConfirm:function(e){o(e),P()},action:n,tokenName:c})),L=Object(x.a)(B,2),F=L[0],P=L[1];return Object(T.jsx)(m.a,{children:Object(T.jsx)(p.a,{children:Object(T.jsxs)(re,{children:[Object(T.jsx)($,{children:"".concat(n," ").concat(r)}),Object(T.jsxs)(ee,{children:[Object(T.jsxs)(te,{children:[Object(T.jsx)(_,{style:{background:"transparent"},children:Object(T.jsx)(v.a,{symbol:t.symbol,size:54})}),Object(T.jsx)(O.a,{text:c,variant:"normal"})]}),Object(T.jsx)(ne,{children:Object(T.jsx)(g.FontAwesomeIcon,{icon:k.faArrowRight})}),Object(T.jsxs)(te,{children:[Object(T.jsx)(_,{style:{background:"transparent"},children:Object(T.jsx)(v.a,{symbol:a.symbol,size:54})}),Object(T.jsx)(O.a,{text:r,variant:"normal"})]})]}),Object(T.jsx)(ae,{children:i}),Object(T.jsx)(ce,{children:E===A.a.APPROVED||u?Object(T.jsx)(h.a,{color:"primary",variant:"contained",onClick:F,disabled:u,children:d||n}):Object(T.jsx)(h.a,{color:"primary",variant:"contained",disabled:E===A.a.PENDING||E===A.a.UNKNOWN,onClick:function(){return j(D(),"Unable to approve ".concat(c))},children:"Approve ".concat(c)})})]})})})},oe=t(1128),se=t(1133),ue=t(46),de=t(33),le=function(){var e=Object(o.useState)(de.a.from(0)),n=Object(x.a)(e,2),t=n[0],a=n[1],r=Object(f.a)(),s=Object(o.useCallback)(Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=a,e.next=3,r.getTombPriceInLastTWAP();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)}))),[r]);return Object(o.useEffect)((function(){s().catch((function(e){return console.error("Failed to fetch TOMB price: ".concat(e.stack))}));var e=setInterval(s,ue.b.refreshInterval);return function(){return clearInterval(e)}}),[a,r,s]),t},be=t(1015),je=u.d.div(W||(W=Object(a.a)(["\n  font-size: 20px;\n  font-weight: 700;\n  margin-bottom: ","px;\n"])),(function(e){return e.theme.spacing[2]})),xe=u.d.span(J||(J=Object(a.a)(["\n  //color: ",";\n  text-align: center;\n"])),(function(e){return e.theme.color.grey[300]})),me=u.d.div(q||(q=Object(a.a)(["\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n  padding: ","px;\n"])),(function(e){return e.theme.spacing[2]})),he=function(e){var n=e.tokenName,t=e.description,c=e.price;return Object(T.jsx)(m.a,{children:Object(T.jsxs)(me,{children:[Object(T.jsx)(je,{children:"\ud83d\udcb0 ".concat(n," = ").concat(c," DAI")}),Object(T.jsx)(xe,{children:t})]})})},pe=function(){var e=Object(o.useState)(de.a.from(0)),n=Object(x.a)(e,2),t=n[0],a=n[1],r=Object(f.a)();return Object(o.useEffect)((function(){function e(){return(e=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=a,e.next=4,r.getBondsPurchasable();case 4:e.t1=e.sent,(0,e.t0)(e.t1),e.next=11;break;case 8:e.prev=8,e.t2=e.catch(0),console.error(e.t2);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[a,r]),t},fe=de.a.from(10).pow(18),Oe=fe.mul(101).div(100),ve=t(983),ge=t(990),ke=t(1235),we=Object(u.c)(K||(K=Object(a.a)(["\n  body {\n    background-color: var(--black);\n    background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='32' viewBox='0 0 16 32'%3E%3Cg fill='%231D1E1F' fill-opacity='0.4'%3E%3Cpath fill-rule='evenodd' d='M0 24h4v2H0v-2zm0 4h6v2H0v-2zm0-8h2v2H0v-2zM0 0h4v2H0V0zm0 4h2v2H0V4zm16 20h-6v2h6v-2zm0 4H8v2h8v-2zm0-8h-4v2h4v-2zm0-20h-6v2h6V0zm0 4h-4v2h4V4zm-2 12h2v2h-2v-2zm0-8h2v2h-2V8zM2 8h10v2H2V8zm0 8h10v2H2v-2zm-2-4h14v2H0v-2zm4-8h6v2H4V4zm0 16h6v2H4v-2zM6 0h2v2H6V0zm0 24h2v2H6v-2z'/%3E%3C/g%3E%3C/svg%3E\");\n}\n\n* {\n    background: transparent;\n    border-radius: 0 !important;\n    box-shadow: none !important;\n}\n"]))),ye=u.d.div(Q||(Q=Object(a.a)(["\n  display: flex;\n  background: transparent;\n  @media (max-width: 768px) {\n    width: 100%;\n    flex-flow: column nowrap;\n    align-items: center;\n  }\n"]))),ze=u.d.div(X||(X=Object(a.a)(["\n  display: flex;\n  flex: 1;\n  background: transparent;\n  flex-direction: column;\n  @media (max-width: 768px) {\n    width: 80%;\n  }\n"]))),He=u.d.div(Y||(Y=Object(a.a)(["\n  display: flex;\n  flex: 0.8;\n  margin: 0 20px;\n  background: transparent;\n  flex-direction: column;\n\n  @media (max-width: 768px) {\n    width: 80%;\n    margin: 16px 0;\n  }\n"]))),Ee=function(){var e=Object(d.g)().path,n=Object(l.b)().account,t=Object(f.a)(),a=Object(be.b)(),r=Object(se.a)(),u=le(),x=pe(),m=Object(ke.a)(),h=Object(ge.a)().slowRefresh,p=Object(M.a)(null===t||void 0===t?void 0:t.HODL),O=Object(o.useCallback)(function(){var e=Object(c.a)(i.a.mark((function e(n){var c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.buyBonds(n);case 2:c=e.sent,a(c,{summary:"Buy ".concat(Number(n).toFixed(2)," HODL with ").concat(n," TOMB")});case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[t,a]),v=Object(o.useCallback)(function(){var e=Object(c.a)(i.a.mark((function e(n){var c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.redeemBonds(n);case 2:c=e.sent,a(c,{summary:"Redeem ".concat(n," HODL")});case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[t,a]),g=Object(o.useMemo)((function(){return u.gt(Oe)}),[u,h]),k=Object(o.useMemo)((function(){return Number(null===r||void 0===r?void 0:r.tokenInFtm)<1.01}),[r,h]);return Object(T.jsx)(d.c,{children:Object(T.jsxs)(s.a,{children:[Object(T.jsx)(we,{}),n?Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(ve.a,{color:"textPrimary",align:"center",variant:"h3",gutterBottom:!0,children:"Bonds"}),Object(T.jsx)(d.a,{exact:!0,path:e,children:Object(T.jsx)(j.a,{icon:"\ud83c\udfe6",subtitle:"Earn premiums upon redemption"})}),Object(T.jsxs)(ye,{children:[Object(T.jsx)(ze,{children:Object(T.jsx)(ie,{action:"Purchase",fromToken:t.TOMB,fromTokenName:"GAME",toToken:t.HODL,toTokenName:"HODL",priceDesc:k?Object(C.a)(x,18,4)+" HODL available for purchase.":"GAME is over peg",onExchange:O,disabled:!r||g})}),Object(T.jsxs)(He,{children:[Object(T.jsx)(he,{tokenName:"GAME",description:"Last-Hour TWAP Price",price:Object(C.a)(u,18,4)}),Object(T.jsx)(oe.a,{size:"md"}),Object(T.jsx)(he,{tokenName:"HODL",description:"Current Price: (GAME)^2",price:Number(null===r||void 0===r?void 0:r.tokenInFtm).toFixed(2)||"-"})]}),Object(T.jsx)(ze,{children:Object(T.jsx)(ie,{action:"Redeem",fromToken:t.HODL,fromTokenName:"HODL",toToken:t.TOMB,toTokenName:"GAME",priceDesc:"".concat(Object(C.a)(p)," HODL Available in wallet.")+(g?+" ".concat(m.tombAvailable.toFixed(4)," GAME available for purchase with ").concat(m.maxBondSell.toFixed(4)," HODL. Current bonus rate is +").concat((100*m.bondBonus-100).toFixed(2),"%."):""),onExchange:v,disabled:!r||p.eq(0)||!g,disabledDescription:g?null:"Enabled when GAME > ".concat(1.01," DAI"),max:m.maxBondSellBN})})]})]}):Object(T.jsx)(b.a,{})]})})}}}]);
//# sourceMappingURL=21.51459bea.chunk.js.map