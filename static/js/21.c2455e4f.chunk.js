(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[21],{1133:function(e,n,t){"use strict";var c=t(20),r=t(37),a=t(0),i=t.n(a),o=t(4),s=t(318),u=t(990);n.a=function(){var e=Object(o.useState)(),n=Object(r.a)(e,2),t=n[0],a=n[1],l=Object(u.a)().slowRefresh,d=Object(s.a)();return Object(o.useEffect)((function(){function e(){return(e=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=a,e.next=4,d.getBondStat();case 4:e.t1=e.sent,(0,e.t0)(e.t1),e.next=11;break;case 8:e.prev=8,e.t2=e.catch(0),console.error(e.t2);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[a,d,l]),t}},1219:function(e,n,t){"use strict";t.d(n,"a",(function(){return b}));var c,r,a,i=t(51),o=(t(4),t(45)),s=t(16),u=o.d.div(c||(c=Object(i.a)(["\n  align-items: center;\n  display: flex;\n  flex-direction: column;\n  padding-bottom: ","px;\n  padding-top: ","px;\n  max-width: 610px;\n  width: 100%;\n  margin: 0 auto;\n  text-align: center;\n"])),(function(e){return e.theme.spacing[6]}),(function(e){return e.theme.spacing[6]})),l=o.d.h1(r||(r=Object(i.a)(["\n  color: ",";\n  font-size: 36px;\n  font-weight: 700;\n  margin: 0;\n  padding: 0;\n"])),(function(e){return e.theme.color.grey[100]})),d=o.d.h3(a||(a=Object(i.a)(["\n  color: ",";\n  font-size: 18px;\n  font-weight: 400;\n  margin: 0;\n  padding: 0;\n  text-align: center;\n"])),(function(e){return e.theme.color.grey[400]})),b=function(e){e.icon;var n=e.subtitle,t=e.title;return Object(s.jsxs)(u,{children:[Object(s.jsx)(l,{children:t}),Object(s.jsx)(d,{children:n})]})}},1834:function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return He}));var c=t(20),r=t(51),a=t(0),i=t.n(a),o=t(4),s=t(1064),u=t(45),l=t(49),d=t(77),b=t(1066),j=t(1219),m=t(37),x=t(1221),h=t(1841),p=t(1358),f=t(318),O=t(1027),v=t(1020),g=t(1373),k=t(1375),w=t(1069),y=t(1359),z=t(1045),E=t(1028),H=t(1047),C=t(1026),D=t(32),N=t(16),T=function(e){var n=e.max,t=e.title,c=e.description,r=e.onConfirm,a=e.onDismiss,i=e.action,s=e.tokenName,u=Object(o.useState)(""),l=Object(m.a)(u,2),d=l[0],b=l[1],j=Object(o.useMemo)((function(){return Object(D.b)(n)}),[n]),x=Object(o.useCallback)((function(e){return b(e.currentTarget.value)}),[b]),h=Object(o.useCallback)((function(){b(j)}),[j,b]);return Object(N.jsxs)(z.a,{children:[Object(N.jsx)(H.a,{text:t}),Object(N.jsx)(C.a,{value:d,onSelectMax:h,onChange:x,max:j,symbol:s}),Object(N.jsx)(O.a,{text:c}),Object(N.jsxs)(E.a,{children:[Object(N.jsx)(y.a,{text:"Cancel",variant:"secondary",onClick:a}),Object(N.jsx)(y.a,{text:i,onClick:function(){return r(d)}})]})]})},M=t(1050),A=t(1099),B=t(141),P="Unexpected error is occurred.";var L,F,I,G,S,V,R,U,W,q,J,K,Q,X,Y,Z=function(){var e=Object(B.b)();return Object(o.useCallback)((function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:P;n.catch((function(n){n.message.includes("User denied")||(console.error("Uncaught exception: ".concat(n.stack)),e({error:{message:t,stack:n.stack}}))}))}),[e])},$=u.d.div(L||(L=Object(r.a)(["\n  align-items: center;\n  display: flex;\n  font-size: 20px;\n  font-weight: 700;\n  height: 64px;\n  justify-content: center;\n  margin-top: ","px;\n"])),(function(e){return-e.theme.spacing[3]})),_=u.d.div(F||(F=Object(r.a)(["\n  background-color: ",";\n  width: 72px;\n  height: 72px;\n  border-radius: 36px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-bottom: ","px;\n"])),(function(e){return e.theme.color.grey[900]}),(function(e){return e.theme.spacing[2]})),ee=u.d.div(I||(I=Object(r.a)(["\n  align-items: center;\n  display: flex;\n  margin-bottom: ","px;\n"])),(function(e){return e.theme.spacing[5]})),ne=u.d.div(G||(G=Object(r.a)(["\n  font-size: 20px;\n  padding-left: ","px;\n  padding-right: ","px;\n  padding-bottom: ","px;\n"])),(function(e){return e.theme.spacing[3]}),(function(e){return e.theme.spacing[3]}),(function(e){return e.theme.spacing[4]})),te=u.d.div(S||(S=Object(r.a)(["\n  align-items: center;\n  display: flex;\n  flex-direction: column;\n  font-weight: 600;\n"]))),ce=u.d.div(V||(V=Object(r.a)(["\n  display: flex;\n  justify-content: center;\n  margin-top: ","px;\n  width: 100%;\n"])),(function(e){return e.theme.spacing[3]})),re=u.d.span(R||(R=Object(r.a)([""]))),ae=u.d.div(U||(U=Object(r.a)(["\n  align-items: center;\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  justify-content: space-between;\n"]))),ie=function(e){var n=e.action,t=e.fromToken,c=e.fromTokenName,r=e.toToken,a=e.toTokenName,i=e.priceDesc,o=e.onExchange,s=e.disabled,u=void 0!==s&&s,l=e.disabledDescription,d=e.max,b=void 0===d?void 0:d,j=Z(),y=Object(f.a)().contracts.Treasury,z=Object(A.b)(t,y.address),E=Object(m.a)(z,2),H=E[0],C=E[1],D=Object(M.a)(t),B=Object(w.a)(Object(N.jsx)(T,{title:n,description:i,max:void 0==b?D:D.gt(b)?b:D,onConfirm:function(e){o(e),F()},action:n,tokenName:c})),P=Object(m.a)(B,2),L=P[0],F=P[1];return Object(N.jsx)(x.a,{children:Object(N.jsx)(p.a,{children:Object(N.jsxs)(ae,{children:[Object(N.jsx)($,{children:"".concat(n," ").concat(a)}),Object(N.jsxs)(ee,{children:[Object(N.jsxs)(te,{children:[Object(N.jsx)(_,{style:{background:"transparent"},children:Object(N.jsx)(v.a,{symbol:t.symbol,size:54})}),Object(N.jsx)(O.a,{text:c,variant:"normal"})]}),Object(N.jsx)(ne,{children:Object(N.jsx)(g.FontAwesomeIcon,{icon:k.faArrowRight})}),Object(N.jsxs)(te,{children:[Object(N.jsx)(_,{style:{background:"transparent"},children:Object(N.jsx)(v.a,{symbol:r.symbol,size:54})}),Object(N.jsx)(O.a,{text:a,variant:"normal"})]})]}),Object(N.jsx)(re,{children:i}),Object(N.jsx)(ce,{children:H===A.a.APPROVED||u?Object(N.jsx)(h.a,{color:"primary",variant:"contained",onClick:L,disabled:u,children:l||n}):Object(N.jsx)(h.a,{color:"primary",variant:"contained",disabled:H===A.a.PENDING||H===A.a.UNKNOWN,onClick:function(){return j(C(),"Unable to approve ".concat(c))},children:"Approve ".concat(c)})})]})})})},oe=t(1128),se=t(1133),ue=t(46),le=t(34),de=function(){var e=Object(o.useState)(le.a.from(0)),n=Object(m.a)(e,2),t=n[0],r=n[1],a=Object(f.a)(),s=Object(o.useCallback)(Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=r,e.next=3,a.getTombPriceInLastTWAP();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)}))),[a]);return Object(o.useEffect)((function(){s().catch((function(e){return console.error("Failed to fetch TOMB price: ".concat(e.stack))}));var e=setInterval(s,ue.b.refreshInterval);return function(){return clearInterval(e)}}),[r,a,s]),t},be=t(1015),je=u.d.div(W||(W=Object(r.a)(["\n  font-size: 20px;\n  font-weight: 700;\n  margin-bottom: ","px;\n"])),(function(e){return e.theme.spacing[2]})),me=u.d.span(q||(q=Object(r.a)(["\n  //color: ",";\n  text-align: center;\n"])),(function(e){return e.theme.color.grey[300]})),xe=u.d.div(J||(J=Object(r.a)(["\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n  padding: ","px;\n"])),(function(e){return e.theme.spacing[2]})),he=function(e){var n=e.tokenName,t=e.description,c=e.price;return Object(N.jsx)(x.a,{children:Object(N.jsxs)(xe,{children:[Object(N.jsx)(je,{children:"\ud83d\udcb0 ".concat(n," = ").concat(c," DAI")}),Object(N.jsx)(me,{children:t})]})})},pe=function(){var e=Object(o.useState)(le.a.from(0)),n=Object(m.a)(e,2),t=n[0],r=n[1],a=Object(f.a)();return Object(o.useEffect)((function(){function e(){return(e=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=r,e.next=4,a.getBondsPurchasable();case 4:e.t1=e.sent,(0,e.t0)(e.t1),e.next=11;break;case 8:e.prev=8,e.t2=e.catch(0),console.error(e.t2);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[r,a]),t},fe=le.a.from(10).pow(18),Oe=fe.mul(101).div(100),ve=t(983),ge=t(990),ke=t(1235),we=Object(u.c)(K||(K=Object(r.a)(["\n  body {\n    background-color: var(--black);\n    background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='32' viewBox='0 0 16 32'%3E%3Cg fill='%231D1E1F' fill-opacity='0.4'%3E%3Cpath fill-rule='evenodd' d='M0 24h4v2H0v-2zm0 4h6v2H0v-2zm0-8h2v2H0v-2zM0 0h4v2H0V0zm0 4h2v2H0V4zm16 20h-6v2h6v-2zm0 4H8v2h8v-2zm0-8h-4v2h4v-2zm0-20h-6v2h6V0zm0 4h-4v2h4V4zm-2 12h2v2h-2v-2zm0-8h2v2h-2V8zM2 8h10v2H2V8zm0 8h10v2H2v-2zm-2-4h14v2H0v-2zm4-8h6v2H4V4zm0 16h6v2H4v-2zM6 0h2v2H6V0zm0 24h2v2H6v-2z'/%3E%3C/g%3E%3C/svg%3E\");\n}\n\n* {\n    background: transparent;\n    border-radius: 0 !important;\n    box-shadow: none !important;\n}\n"]))),ye=u.d.div(Q||(Q=Object(r.a)(["\n  display: flex;\n  background: transparent;\n  @media (max-width: 768px) {\n    width: 100%;\n    flex-flow: column nowrap;\n    align-items: center;\n  }\n"]))),ze=u.d.div(X||(X=Object(r.a)(["\n  display: flex;\n  flex: 1;\n  background: transparent;\n  flex-direction: column;\n  @media (max-width: 768px) {\n    width: 80%;\n  }\n"]))),Ee=u.d.div(Y||(Y=Object(r.a)(["\n  display: flex;\n  flex: 0.8;\n  margin: 0 20px;\n  background: transparent;\n  flex-direction: column;\n\n  @media (max-width: 768px) {\n    width: 80%;\n    margin: 16px 0;\n  }\n"]))),He=function(){var e=Object(l.g)().path,n=Object(d.b)().account,t=Object(f.a)(),r=Object(be.b)(),a=Object(se.a)(),u=de(),m=pe(),x=Object(ke.a)(),h=Object(ge.a)().slowRefresh,p=Object(M.a)(null===t||void 0===t?void 0:t.HODL),O=Object(o.useCallback)(function(){var e=Object(c.a)(i.a.mark((function e(n){var c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.buyBonds(n);case 2:c=e.sent,r(c,{summary:"Buy ".concat(Number(n).toFixed(2)," HODL with ").concat(n," TOMB")});case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[t,r]),v=Object(o.useCallback)(function(){var e=Object(c.a)(i.a.mark((function e(n){var c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.redeemBonds(n);case 2:c=e.sent,r(c,{summary:"Redeem ".concat(n," HODL")});case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[t,r]),g=Object(o.useMemo)((function(){return u.gt(Oe)}),[u,h]),k=Object(o.useMemo)((function(){return Number(null===a||void 0===a?void 0:a.tokenInFtm)<1.01}),[a,h]);return Object(N.jsx)(l.c,{children:Object(N.jsxs)(s.a,{children:[Object(N.jsx)(we,{}),n?Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(ve.a,{color:"textPrimary",align:"center",variant:"h3",gutterBottom:!0,children:"Bonds"}),Object(N.jsx)(l.a,{exact:!0,path:e,children:Object(N.jsx)(j.a,{icon:"\ud83c\udfe6",subtitle:"Earn premiums upon redemption"})}),Object(N.jsxs)(ye,{children:[Object(N.jsx)(ze,{children:Object(N.jsx)(ie,{action:"Purchase",fromToken:t.TOMB,fromTokenName:"GAME",toToken:t.HODL,toTokenName:"HODL",priceDesc:k?Object(D.a)(m,18,4)+" HODL available for purchase.":"GAME is over peg",onExchange:O,disabled:!a||g})}),Object(N.jsxs)(Ee,{children:[Object(N.jsx)(he,{tokenName:"GAME",description:"GAME Price (TWAP)",price:Object(D.a)(u,18,4)}),Object(N.jsx)(oe.a,{size:"md"}),Object(N.jsx)(he,{tokenName:"HODL",description:"Current Price (Current GAME Price + Premium)",price:Number(null===a||void 0===a?void 0:a.tokenInFtm).toFixed(2)||"-"})]}),Object(N.jsx)(ze,{children:Object(N.jsx)(ie,{action:"Redeem",fromToken:t.HODL,fromTokenName:"HODL",toToken:t.TOMB,toTokenName:"GAME",priceDesc:"".concat(Object(D.a)(p)," HODL Available in wallet.")+(g?+" ".concat(x.tombAvailable.toFixed(4)," GAME available for purchase with ").concat(x.maxBondSell.toFixed(4)," HODL. Current bonus rate is +").concat((100*x.bondBonus-100).toFixed(2),"%."):""),onExchange:v,disabled:!a||p.eq(0)||x.maxBondSellBN.eq(0)||!g,disabledDescription:g?null:"Enabled when GAME > ".concat(1.01," DAI"),max:x.maxBondSellBN})})]})]}):Object(N.jsx)(b.a,{})]})})}}}]);
//# sourceMappingURL=21.c2455e4f.chunk.js.map